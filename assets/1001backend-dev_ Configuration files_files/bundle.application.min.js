function _debug(a){SHOULD_DEBUG&&window.console&&window.console.log&&window.console.log(a)}function escapeHtml(a){return String(a).replace(/[&<>"'\/]/g,function(a){return entityMap[a]})}!function(a,b){a.rails!==b&&a.error("jquery-ujs has already been loaded!");var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},href:function(a){return a.attr("href")},handleRemote:function(d){var e,f,g,h,i,j,k,l;if(c.fire(d,"ajax:before")){if(h=d.data("cross-domain"),i=h===b?null:h,j=d.data("with-credentials")||null,k=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var m=d.data("ujs:submit-button");m&&(g.push(m),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=c.href(d),g=d.data("params")||null);l={type:e||"GET",data:g,dataType:k,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])},crossDomain:i},j&&(l.xhrFields={withCredentials:j}),f&&(l.url=f);var n=c.ajax(l);return d.trigger("ajax:send",n),n}return!1},handleMethod:function(d){var e=c.href(d),f=d.data("method"),g=d.attr("target"),h=a("meta[name=csrf-token]").attr("content"),i=a("meta[name=csrf-param]").attr("content"),j=a('<form method="post" action="'+e+'"></form>'),k='<input name="_method" value="'+f+'" type="hidden" />';i!==b&&h!==b&&(k+='<input name="'+i+'" value="'+h+'" type="hidden" />'),g&&j.attr("target",g),j.hide().append(k).appendTo("body"),j.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.prop("disabled",!1)})},allowAction:function(a){var b,d=a.data("confirm"),e=!1;return d?(c.fire(a,"confirm")&&(e=c.confirm(d),b=c.fire(a,"confirm:complete",[e])),e&&b):!0},blankInputs:function(b,c,d){var e,f,g=a(),h=c||"input,textarea",i=b.find(h);return i.each(function(){if(e=a(this),f=e.is("input[type=checkbox],input[type=radio]")?e.is(":checked"):e.val(),!f==!d){if(e.is("input[type=radio]")&&i.filter('input[type=radio]:checked[name="'+e.attr("name")+'"]').length)return!0;g=g.add(e)}}),g.length?g:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c,d){var e=c.data("events"),f=!0;return e!==b&&e.submit!==b&&a.each(e.submit,function(a,b){return"function"==typeof b.handler?f=b.handler(d):void 0}),f},disableElement:function(a){a.data("ujs:enable-with",a.html()),a.html(a.data("disable-with")),a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.removeData("ujs:enable-with")),a.unbind("click.railsDisable")}},c.fire(a(document),"rails:attachBindings")&&(a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))}),a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);if(e.is(c.linkDisableSelector)&&c.disableElement(e),e.data("remote")!==b){if((d.metaKey||d.ctrlKey)&&(!f||"GET"===f)&&!g)return!0;var h=c.handleRemote(e);return h===!1?c.enableElement(e):h.error(function(){c.enableElement(e)}),!1}return e.data("method")?(c.handleMethod(e),!1):void 0}),a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f){if(h){setTimeout(function(){c.disableFormElements(e)},13);var i=c.fire(e,"ajax:aborted:file",[h]);return i||setTimeout(function(){c.enableFormElements(e)},13),i}return!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===!1?c.stopEverything(d):(c.handleRemote(e),!1)}setTimeout(function(){c.disableFormElements(e)},13)}),a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))}),a(function(){var b=a("meta[name=csrf-token]").attr("content"),c=a("meta[name=csrf-param]").attr("content");a('form input[name="'+c+'"]').val(b)}))}(jQuery),window.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+v.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+w.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.8.3",n={},o=!0,p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),u="Webkit Moz O ms",v=u.split(" "),w=u.toLowerCase().split(" "),x={svg:"http://www.w3.org/2000/svg"},y={},z=[],A=z.slice,B={}.hasOwnProperty;l=e(B,"undefined")||e(B.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return B.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=A.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(A.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(A.call(arguments)))};return d}),y.flexbox=function(){return i("flexWrap")},y.rgba=function(){return d("background-color:rgba(150,255,150,.5)"),f(s.backgroundColor,"rgba")},y.boxshadow=function(){return i("boxShadow")},y.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return d((a+"-webkit- ".split(" ").join(b+a)+t.join(c+a)).slice(0,-a.length)),f(s.backgroundImage,"gradient")},y.svg=function(){return!!b.createElementNS&&!!b.createElementNS(x.svg,"svg").createSVGRect};for(var C in y)l(y,C)&&(k=C.toLowerCase(),n[k]=y[C](),z.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof o&&o&&(p.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),r=j=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=s.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b=r[a[p]];return b||(b={},q++,a[p]=q,r[q]=b),b}function f(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=e(c));var f;return f=d.cache[a]?d.cache[a].cloneNode():o.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!f.canHaveChildren||n.test(a)||f.tagUrn?f:d.frag.appendChild(f)}function g(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||e(a);for(var f=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)f.createElement(h[g]);return f}function h(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?f(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function i(a){a||(a=b);var d=e(a);return s.shivCSS&&!j&&!d.hasCSS&&(d.hasCSS=!!c(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||h(a,d),a}var j,k,l="3.7.0",m=a.html5||{},n=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,o=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",q=0,r={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",j="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){j=!0,k=!0}}();var s={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:l,shivCSS:m.shivCSS!==!1,supportsUnknownElements:k,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:i,createElement:f,createDocumentFragment:g};a.html5=s,i(b)}(this,b),n._version=m,n._prefixes=t,n._domPrefixes=w,n._cssomPrefixes=v,n.testProp=function(a){return g([a])},n.testAllProps=i,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(o?" js "+z.join(" "):""),n}(this,this.document),function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(a){if(null===a)return"null";var b,c,d,e,f=$.type(a);if("undefined"!==f){if("number"===f||"boolean"===f)return String(a);if("string"===f)return $.quoteString(a);if("function"==typeof a.toJSON)return $.toJSON(a.toJSON());if("date"===f){var g=a.getUTCMonth()+1,h=a.getUTCDate(),i=a.getUTCFullYear(),j=a.getUTCHours(),k=a.getUTCMinutes(),l=a.getUTCSeconds(),m=a.getUTCMilliseconds();return 10>g&&(g="0"+g),10>h&&(h="0"+h),10>j&&(j="0"+j),10>k&&(k="0"+k),10>l&&(l="0"+l),100>m&&(m="0"+m),10>m&&(m="0"+m),'"'+i+"-"+g+"-"+h+"T"+j+":"+k+":"+l+"."+m+'Z"'}if(b=[],$.isArray(a)){for(c=0;c<a.length;c++)b.push($.toJSON(a[c])||"null");return"["+b.join(",")+"]"}if("object"==typeof a){for(c in a)if(hasOwn.call(a,c)){if(f=typeof c,"number"===f)d='"'+c+'"';else{if("string"!==f)continue;d=$.quoteString(c)}f=typeof a[c],"function"!==f&&"undefined"!==f&&(e=$.toJSON(a[c]),b.push(d+":"+e))}return"{"+b.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(a){return a.match(escape)?'"'+a.replace(escape,function(a){var b=meta[a];return"string"==typeof b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'}}(jQuery),function(a){function b(b){if("string"==typeof b.data){var c=b.handler,d=b.data.toLowerCase().split(" "),e=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];b.handler=function(b){if(this===b.target||!(/textarea|select/i.test(b.target.nodeName)||a.inArray(b.target.type,e)>-1)){var f="keypress"!==b.type&&a.hotkeys.specialKeys[b.which],g=String.fromCharCode(b.which).toLowerCase(),h="",i={};b.altKey&&"alt"!==f&&(h+="alt+"),b.ctrlKey&&"ctrl"!==f&&(h+="ctrl+"),b.metaKey&&!b.ctrlKey&&"meta"!==f&&(h+="meta+"),b.shiftKey&&"shift"!==f&&(h+="shift+"),f?i[h+f]=!0:(i[h+g]=!0,i[h+a.hotkeys.shiftNums[g]]=!0,"shift+"===h&&(i[a.hotkeys.shiftNums[g]]=!0));for(var j=0,k=d.length;k>j;j++)if(i[d[j]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var e,f=b||window.event,g=[].slice.call(arguments,1),h=0,i=0,j=0,k=0,l=0;return b=a.event.fix(f),b.type="mousewheel",f.wheelDelta&&(h=f.wheelDelta),f.detail&&(h=-1*f.detail),f.deltaY&&(j=-1*f.deltaY,h=j),f.deltaX&&(i=f.deltaX,h=-1*i),void 0!==f.wheelDeltaY&&(j=f.wheelDeltaY),void 0!==f.wheelDeltaX&&(i=-1*f.wheelDeltaX),k=Math.abs(h),(!c||c>k)&&(c=k),l=Math.max(Math.abs(j),Math.abs(i)),(!d||d>l)&&(d=l),e=h>0?"floor":"ceil",h=Math[e](h/c),i=Math[e](i/d),j=Math[e](j/d),g.unshift(b,h,i,j),(a.event.dispatch||a.event.handle).apply(this,g)}var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(a.event.fixHooks)for(var g=e.length;g;)a.event.fixHooks[e[--g]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=f.length;a;)this.addEventListener(f[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a,b,c){a.fn.jScrollPane=function(d){function e(d,e){function f(b){var e,h,j,l,m,n,q=!1,r=!1;if(P=b,Q===c)m=d.scrollTop(),n=d.scrollLeft(),d.css({overflow:"hidden",padding:0}),R=d.innerWidth()+ta,S=d.innerHeight(),d.width(R),Q=a('<div class="jspPane" />').css("padding",sa).append(d.children()),T=a('<div class="jspContainer" />').css({width:R+"px",height:S+"px"}).append(Q).appendTo(d);else{if(d.css("width",""),q=P.stickToBottom&&C(),r=P.stickToRight&&D(),l=d.innerWidth()+ta!=R||d.outerHeight()!=S,l&&(R=d.innerWidth()+ta,S=d.innerHeight(),T.css({width:R+"px",height:S+"px"})),!l&&ua==U&&Q.outerHeight()==V)return void d.width(R);ua=U,Q.css("width",""),d.width(R),T.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}Q.css("overflow","auto"),U=b.contentWidth?b.contentWidth:Q[0].scrollWidth,V=Q[0].scrollHeight,Q.css("overflow",""),W=U/R,X=V/S,Y=X>1,Z=W>1,Z||Y?(d.addClass("jspScrollable"),e=P.maintainPosition&&(aa||da),e&&(h=A(),j=B()),g(),i(),k(),e&&(y(r?U-R:h,!1),x(q?V-S:j,!1)),H(),E(),N(),P.enableKeyboardNavigation&&J(),P.clickOnTrack&&o(),L(),P.hijackInternalLinks&&M()):(d.removeClass("jspScrollable"),Q.css({top:0,width:T.width()-ta}),F(),I(),K(),p()),P.autoReinitialise&&!ra?ra=setInterval(function(){f(P)},P.autoReinitialiseDelay):!P.autoReinitialise&&ra&&clearInterval(ra),m&&d.scrollTop(0)&&x(m,!1),n&&d.scrollLeft(0)&&y(n,!1),d.trigger("jsp-initialised",[Z||Y])}function g(){Y&&(T.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),ea=T.find(">.jspVerticalBar"),fa=ea.find(">.jspTrack"),$=fa.find(">.jspDrag"),P.showArrows&&(ja=a('<a class="jspArrow jspArrowUp" />').on("mousedown.jsp",m(0,-1)).on("click.jsp",G),ka=a('<a class="jspArrow jspArrowDown" />').on("mousedown.jsp",m(0,1)).on("click.jsp",G),P.arrowScrollOnHover&&(ja.on("mouseover.jsp",m(0,-1,ja)),ka.on("mouseover.jsp",m(0,1,ka))),l(fa,P.verticalArrowPositions,ja,ka)),ha=S,T.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ha-=a(this).outerHeight()}),$.on({mouseenter:function(){$.addClass("jspHover")},mouseleave:function(){$.removeClass("jspHover")}}).on("mousedown.jsp",function(b){a("html").on("dragstart.jsp selectstart.jsp",G),$.addClass("jspActive");var c=b.pageY-$.position().top;return a("html").on("mousemove.jsp",function(a){r(a.pageY-c,!1)}).on("mouseup.jsp mouseleave.jsp",q),!1}),h())}function h(){fa.height(ha+"px"),aa=0,ga=P.verticalGutter+fa.outerWidth(),Q.width(R-ga-ta);try{0===ea.position().left&&Q.css("margin-left",ga+"px")}catch(a){}}function i(){Z&&(T.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),la=T.find(">.jspHorizontalBar"),ma=la.find(">.jspTrack"),ba=ma.find(">.jspDrag"),P.showArrows&&(pa=a('<a class="jspArrow jspArrowLeft" />').on("mousedown.jsp",m(-1,0)).on("click.jsp",G),qa=a('<a class="jspArrow jspArrowRight" />').on("mousedown.jsp",m(1,0)).on("click.jsp",G),P.arrowScrollOnHover&&(pa.on("mouseover.jsp",m(-1,0,pa)),qa.on("mouseover.jsp",m(1,0,qa))),l(ma,P.horizontalArrowPositions,pa,qa)),ba.on({mouseenter:function(){ba.addClass("jspHover")},mouseleave:function(){ba.removeClass("jspHover")}}).on("mousedown.jsp",function(b){a("html").on("dragstart.jsp selectstart.jsp",G),ba.addClass("jspActive");var c=b.pageX-ba.position().left;return a("html").on("mousemove.jsp",function(a){t(a.pageX-c,!1)}).on("mouseup.jsp mouseleave.jsp",q),!1}),na=T.innerWidth(),j())}function j(){T.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){na-=a(this).outerWidth()}),ma.width(na+"px"),da=0}function k(){if(Z&&Y){var b=ma.outerHeight(),c=fa.outerWidth();ha-=b,a(la).find(">.jspCap:visible,>.jspArrow").each(function(){na+=a(this).outerWidth()}),na-=c,S-=c,R-=b,ma.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),h(),j()}Z&&Q.width(T.outerWidth()-ta+"px"),V=Q.outerHeight(),X=V/S,Z&&(oa=Math.ceil(1/W*na),oa>P.horizontalDragMaxWidth?oa=P.horizontalDragMaxWidth:oa<P.horizontalDragMinWidth&&(oa=P.horizontalDragMinWidth),ba.width(oa+"px"),ca=na-oa,u(da)),Y&&(ia=Math.ceil(1/X*ha),ia>P.verticalDragMaxHeight?ia=P.verticalDragMaxHeight:ia<P.verticalDragMinHeight&&(ia=P.verticalDragMinHeight),$.height(ia+"px"),_=ha-ia,s(aa))}function l(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function m(a,b,c){return function(){return n(a,b,this,c),this.blur(),!1}}function n(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&va.scrollByX(b*P.arrowButtonSpeed),0!==c&&va.scrollByY(c*P.arrowButtonSpeed),g=setTimeout(i,h?P.initialDelay:P.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.on(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.off(f)})}function o(){p(),Y&&fa.on("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d,e=a(this),f=e.offset(),g=b.pageY-f.top-aa,h=!0,i=function(){var a=e.offset(),c=b.pageY-a.top-ia/2,f=S*P.scrollPagePercent,k=_*f/(V-S);if(0>g)aa-k>c?va.scrollByY(-f):r(c);else{if(!(g>0))return void j();c>aa+k?va.scrollByY(f):r(c)}d=setTimeout(i,h?P.initialDelay:P.trackClickRepeatFreq),h=!1},j=function(){d&&clearTimeout(d),d=null,a(document).off("mouseup.jsp",j)};return i(),a(document).on("mouseup.jsp",j),!1}}),Z&&ma.on("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d,e=a(this),f=e.offset(),g=b.pageX-f.left-da,h=!0,i=function(){var a=e.offset(),c=b.pageX-a.left-oa/2,f=R*P.scrollPagePercent,k=ca*f/(U-R);if(0>g)da-k>c?va.scrollByX(-f):t(c);else{if(!(g>0))return void j();c>da+k?va.scrollByX(f):t(c)}d=setTimeout(i,h?P.initialDelay:P.trackClickRepeatFreq),h=!1},j=function(){d&&clearTimeout(d),d=null,a(document).off("mouseup.jsp",j)};return i(),a(document).on("mouseup.jsp",j),!1}})}function p(){ma&&ma.off("mousedown.jsp"),fa&&fa.off("mousedown.jsp")}function q(){a("html").off("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),$&&$.removeClass("jspActive"),ba&&ba.removeClass("jspActive")}function r(a,b){Y&&(0>a?a=0:a>_&&(a=_),b===c&&(b=P.animateScroll),b?va.animate($,"top",a,s):($.css("top",a),s(a)))}function s(a){a===c&&(a=$.position().top),T.scrollTop(0),aa=a;var b=0===aa,e=aa==_,f=a/_,g=-f*(V-S);(wa!=b||ya!=e)&&(wa=b,ya=e,d.trigger("jsp-arrow-change",[wa,ya,xa,za])),v(b,e),Q.css("top",g),d.trigger("jsp-scroll-y",[-g,b,e]).trigger("scroll")}function t(a,b){Z&&(0>a?a=0:a>ca&&(a=ca),b===c&&(b=P.animateScroll),b?va.animate(ba,"left",a,u):(ba.css("left",a),u(a)))}function u(a){a===c&&(a=ba.position().left),T.scrollTop(0),da=a;var b=0===da,e=da==ca,f=a/ca,g=-f*(U-R);(xa!=b||za!=e)&&(xa=b,za=e,d.trigger("jsp-arrow-change",[wa,ya,xa,za])),w(b,e),Q.css("left",g),d.trigger("jsp-scroll-x",[-g,b,e]).trigger("scroll")}function v(a,b){P.showArrows&&(ja[a?"addClass":"removeClass"]("jspDisabled"),ka[b?"addClass":"removeClass"]("jspDisabled"))}function w(a,b){P.showArrows&&(pa[a?"addClass":"removeClass"]("jspDisabled"),qa[b?"addClass":"removeClass"]("jspDisabled"))}function x(a,b){var c=a/(V-S);r(c*_,b)}function y(a,b){var c=a/(U-R);t(c*ca,b)}function z(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),T.scrollTop(0),T.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=B(),j=h+S,h>n||c?l=n-P.verticalGutter:n+f>j&&(l=n-S+f+P.verticalGutter),l&&x(l,d),i=A(),k=i+R,i>o||c?m=o-P.horizontalGutter:o+g>k&&(m=o-R+g+P.horizontalGutter),m&&y(m,d)}function A(){return-Q.position().left}function B(){return-Q.position().top}function C(){var a=V-S;return a>20&&a-B()<10}function D(){var a=U-R;return a>20&&a-A()<10}function E(){T.off(Ba).on(Ba,function(a,b,c,d){var e=da,f=aa;return va.scrollBy(c*P.mouseWheelSpeed,-d*P.mouseWheelSpeed,!1),e==da&&f==aa})}function F(){T.off(Ba)}function G(){return!1}function H(){Q.find(":input,a").off("focus.jsp").on("focus.jsp",function(a){z(a.target,!1)})}function I(){Q.find(":input,a").off("focus.jsp")}function J(){function b(){var a=da,b=aa;switch(c){case 40:va.scrollByY(P.keyboardSpeed,!1);break;case 38:va.scrollByY(-P.keyboardSpeed,!1);break;case 34:case 32:va.scrollByY(S*P.scrollPagePercent,!1);break;case 33:va.scrollByY(-S*P.scrollPagePercent,!1);break;case 39:va.scrollByX(P.keyboardSpeed,!1);break;case 37:va.scrollByX(-P.keyboardSpeed,!1)}return e=a!=da||b!=aa}var c,e,f=[];Z&&f.push(la[0]),Y&&f.push(ea[0]),Q.focus(function(){d.focus()}),d.attr("tabindex",0).off("keydown.jsp keypress.jsp").on("keydown.jsp",function(d){if(d.target===this||f.length&&a(d.target).closest(f).length){var g=da,h=aa;switch(d.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:c=d.keyCode,b();break;case 35:x(V-S),c=null;break;case 36:x(0),c=null}return e=d.keyCode==c&&g!=da||h!=aa,!e}}).on("keypress.jsp",function(a){return a.keyCode==c&&b(),!e}),P.hideFocus?(d.css("outline","none"),"hideFocus"in T[0]&&d.attr("hideFocus",!0)):(d.css("outline",""),"hideFocus"in T[0]&&d.attr("hideFocus",!1))}function K(){d.attr("tabindex","-1").removeAttr("tabindex").off("keydown.jsp keypress.jsp")}function L(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]')}catch(e){return}b.length&&Q.find(d)&&(0===T.scrollTop()?c=setInterval(function(){T.scrollTop()>0&&(z(b,!0),a(document).scrollTop(T.position().top),clearInterval(c))},50):(z(b,!0),a(document).scrollTop(T.position().top)))}}function M(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a("body").on("click","a[href*=#]",function(c){var d,e,f,g,h,i,j=this.href.substr(0,this.href.indexOf("#")),k=location.href;if(-1!==location.href.indexOf("#")&&(k=location.href.substr(0,location.href.indexOf("#"))),j===k){d=escape(this.href.substr(this.href.indexOf("#")+1));try{e=a("#"+d+', a[name="'+d+'"]')}catch(l){return}e.length&&(f=e.closest(".jspScrollable"),g=f.data("jsp"),g.scrollToElement(e,!0),f[0].scrollIntoView&&(h=a(b).scrollTop(),i=e.offset().top,(h>i||i>h+a(b).height())&&f[0].scrollIntoView()),c.preventDefault())}}))}function N(){var a,b,c,d,e,f=!1;T.off("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").on("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=A(),b=B(),c=h.pageX,d=h.pageY,e=!1,f=!0}).on("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=da,j=aa;return va.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==da&&j==aa}}).on("touchend.jsp",function(a){f=!1}).on("click.jsp-touchclick",function(a){return e?(e=!1,!1):void 0})}function O(){var a=B(),b=A();d.removeClass("jspScrollable").off(".jsp"),d.replaceWith(Aa.append(Q.children())),Aa.scrollTop(a),Aa.scrollLeft(b),ra&&clearInterval(ra)}var P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va=this,wa=!0,xa=!0,ya=!1,za=!1,Aa=d.clone(!1,!1).empty(),Ba=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";sa=d.css("paddingTop")+" "+d.css("paddingRight")+" "+d.css("paddingBottom")+" "+d.css("paddingLeft"),ta=(parseInt(d.css("paddingLeft"),10)||0)+(parseInt(d.css("paddingRight"),10)||0),a.extend(va,{reinitialise:function(b){b=a.extend({},P,b),f(b)},scrollToElement:function(a,b,c){z(a,b,c)},scrollTo:function(a,b,c){y(a,c),x(b,c)},scrollToX:function(a,b){y(a,b)},scrollToY:function(a,b){x(a,b)},scrollToPercentX:function(a,b){y(a*(U-R),b)},scrollToPercentY:function(a,b){x(a*(V-S),b)},scrollBy:function(a,b,c){va.scrollByX(a,c),va.scrollByY(b,c)},scrollByX:function(a,b){var c=A()+Math[0>a?"floor":"ceil"](a),d=c/(U-R);t(d*ca,b)},scrollByY:function(a,b){var c=B()+Math[0>a?"floor":"ceil"](a),d=c/(V-S);r(d*_,b)},positionDragX:function(a,b){t(a,b)},positionDragY:function(a,b){r(a,b)},animate:function(a,b,c,d){var e={};e[b]=c,a.animate(e,{duration:P.animateDuration,easing:P.animateEase,queue:!1,step:d})},getContentPositionX:function(){return A()},getContentPositionY:function(){return B()},getContentWidth:function(){return U},getContentHeight:function(){return V},getPercentScrolledX:function(){return A()/(U-R)},getPercentScrolledY:function(){return B()/(V-S)},getIsScrollableH:function(){return Z},getIsScrollableV:function(){return Y},getContentPane:function(){return Q},scrollToBottom:function(a){r(_,a)},hijackInternalLinks:a.noop,destroy:function(){O()}}),f(e)}return d=a.extend({},a.fn.jScrollPane.defaults,d),a.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){d[this]=d[this]||d.speed}),this.each(function(){var b=a(this),c=b.data("jsp");c?c.reinitialise(d):(a("script",b).filter('[type="text/javascript"],:not([type])').remove(),c=new e(b,d),b.data("jsp",c))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=w.call(arguments,1);return function(){return a.apply(this,b.concat(w.call(arguments)))}}function e(a){return a.replace(s,"$2")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(b,d,e,f,g){var h,i,l,n,o;return f!==j?(l=e.match(b?s:/^([^#?]*)\??([^#]*)(#?.*)/),o=l[3]||"",2===g&&c(f)?i=f.replace(b?r:H,""):(n=m(l[2]),f=c(f)?m[b?D:C](f):f,i=2===g?f:1===g?a.extend({},f,n):a.extend({},n,f),i=k(i),b&&(i=i.replace(t,x))),h=l[1]+(b?v:i||!l[1]?"?":"")+i+o):h=d(e!==j?e:location.href),h}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=y[a?D:C]()):b=c(b)?b.replace(a?r:H,""):b,m(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||q()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,y[b](h,e,f))})}var j,k,l,m,n,o,p,q,r,s,t,u,v,w=Array.prototype.slice,x=decodeURIComponent,y=a.param,z=a.bbq=a.bbq||{},A=a.event.special,B="hashchange",C="querystring",D="fragment",E="elemUrlAttr",F="href",G="src",H=/^.*\?|#.*$/g,I={};y[C]=d(g,0,f),y[D]=l=d(g,1,e),y.sorted=k=function(b,c){var d=[],e={};return a.each(y(b,c).split("&"),function(a,b){var c=b.replace(/(?:%5B|=).*$/,""),f=e[c];f||(f=e[c]=[],d.push(c)),f.push(b)}),a.map(d.sort(),function(a){return e[a]}).join("&")},l.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);t=new RegExp(c.join("|"),"g")},l.noEscape(",/"),l.ajaxCrawlable=function(a){return a!==j&&(a?(r=/^.*(?:#!|#)/,s=/^([^#]*)(?:#!|#)?(.*)$/,v="#!"):(r=/^.*#/,s=/^([^#]*)#?(.*)$/,v="#"),u=!!a),u},l.ajaxCrawlable(0),a.deparam=m=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=x(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=x(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;n>=l;l++)i=""===m[l]?k.length:m[l],
k=k[i]=n>l?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]!==j?d[i]=[d[i],g]:d[i]=g;else i&&(d[i]=c?j:"")}),d},m[C]=d(h,0),m[D]=n=d(h,1),a[E]||(a[E]=function(b){return a.extend(I,b)})({a:F,base:F,iframe:G,img:G,input:G,form:"action",link:F,script:G}),q=a[E],a.fn[C]=d(i,C),a.fn[D]=d(i,D),z.pushState=o=function(a,b){c(a)&&/^#/.test(a)&&b===j&&(b=2);var d=a!==j,e=l(location.href,d?a:{},d?b:2);location.href=e},z.getState=p=function(a,b){return a===j||"boolean"==typeof a?n(a):n(b)[a]},z.removeState=function(b){var c={};b!==j&&(c=p(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),o(c,2)},A[B]=a.extend(A[B],{add:function(b){function c(a){var b=a[D]=l();a.getState=function(a,c){return a===j||"boolean"==typeof a?m(b,a):m(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,void(b.handler=c))}})}(jQuery,this),function(a,b,c){"$:nomunge";function d(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f="hashchange",g=document,h=a.event.special,i=g.documentMode,j="on"+f in b&&(i===c||i>7);a.fn[f]=function(a){return a?this.bind(f,a):this.trigger(f)},a.fn[f].delay=50,h[f]=a.extend(h[f],{setup:function(){return j?!1:void a(e.start)},teardown:function(){return j?!1:void a(e.stop)}}),e=function(){function e(){var c=d(),h=l(i);c!==i?(k(i=c,h),a(b).trigger(f)):h!==i&&(location.href=location.href.replace(/#.*/,"")+h),g=setTimeout(e,a.fn[f].delay)}var g,h={},i=d(),j=function(a){return a},k=j,l=j;return h.start=function(){g||e()},h.stop=function(){g&&clearTimeout(g),g=c},h}()}(jQuery,this),function(a){function b(a){return a.replace(/(:|\.)/g,"\\$1")}var c="1.4.10",d={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},e=function(b){var c=[],d=!1,e=b.dir&&"left"==b.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!=document&&this!=window){var b=a(this);b[e]()>0?c.push(this):(b[e](1),d=b[e]()>0,d&&c.push(this),b[e](0))}}),c.length||this.each(function(a){"BODY"===this.nodeName&&(c=[this])}),"first"===b.el&&c.length>1&&(c=[c[0]]),c};"ontouchend"in document;a.fn.extend({scrollable:function(a){var b=e.call(this,{dir:a});return this.pushStack(b)},firstScrollable:function(a){var b=e.call(this,{el:"first",dir:a});return this.pushStack(b)},smoothScroll:function(c){c=c||{};var d=a.extend({},a.fn.smoothScroll.defaults,c),e=a.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(c){var f=this,g=a(this),h=d.exclude,i=d.excludeWithin,j=0,k=0,l=!0,m={},n=location.hostname===f.hostname||!f.hostname,o=d.scrollTarget||(a.smoothScroll.filterPath(f.pathname)||e)===e,p=b(f.hash);if(d.scrollTarget||n&&o&&p){for(;l&&j<h.length;)g.is(b(h[j++]))&&(l=!1);for(;l&&k<i.length;)g.closest(i[k++]).length&&(l=!1)}else l=!1;l&&(c.preventDefault(),a.extend(m,d,{scrollTarget:d.scrollTarget||p,link:f}),a.smoothScroll(m))}),this}}),a.smoothScroll=function(b,c){var d,e,f,g,h=0,i="offset",j="scrollTop",k={},l={};"number"==typeof b?(d=a.fn.smoothScroll.defaults,f=b):(d=a.extend({},a.fn.smoothScroll.defaults,b||{}),d.scrollElement&&(i="position","static"==d.scrollElement.css("position")&&d.scrollElement.css("position","relative"))),d=a.extend({link:null},d),j="left"==d.direction?"scrollLeft":j,d.scrollElement?(e=d.scrollElement,h=e[j]()):e=a("html, body").firstScrollable(),d.beforeScroll.call(e,d),f="number"==typeof b?b:c||a(d.scrollTarget)[i]()&&a(d.scrollTarget)[i]()[d.direction]||0,k[j]=f+h+d.offset,g=d.speed,"auto"===g&&(g=k[j]||e.scrollTop(),g/=d.autoCoefficent),l={duration:g,easing:d.easing,complete:function(){d.afterScroll.call(d.link,d)}},d.step&&(l.step=d.step),e.length?e.stop().animate(k,l):d.afterScroll.call(d.link,d)},a.smoothScroll.version=c,a.smoothScroll.filterPath=function(a){return a.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},a.fn.smoothScroll.defaults=d}(jQuery),String.prototype.score=function(a,b){if(b=b||0,0==a.length)return.9;if(a.length>this.length)return 0;for(var c=a.length;c>0;c--){var d=a.substring(0,c),e=this.indexOf(d);if(!(0>e||e+a.length>this.length+b)){var f=this.substring(e+d.length),g=null;g=c>=a.length?"":a.substring(c);var h=f.score(g,b+e);if(h>0){var i=this.length-f.length;if(0!=e){var j=0,k=this.charCodeAt(e-1);if(32==k||9==k)for(var j=e-2;j>=0;j--)k=this.charCodeAt(j),i-=32==k||9==k?1:.15;else i-=e}return i+=h*f.length,i/=this.length}}}return 0},jQuery.fn.autocomplete=function(a){if(0!=this.length){var b=jQuery.extend({type:"local",data:!1,url:!1,maxResults:10,offset:500,blankMessage:"Sorry, nothing found.",onTyping:function(){},onQuery:function(){},onShow:function(){},onClear:function(){},onSelect:function(a){}},a);return $(this).each(function(){function a(){switch(m=!0,b.type){case"local":var a=new Array;$.each(b.data,function(c,d){-1!=d.text.search(new RegExp(i(k.val()),"i"))&&a.push(b.data[c])}),c(a);break;case"remote":$.ajax({url:b.url,dataType:"json",data:{keywords:k.val()},success:function(a){c(a)}})}}function c(a){k.removeClass("querying"),m=!1,g(),$.each(a,function(a,c){a>=b.maxResults||$('<li><a href="#" rel="'+c.id+'">'+c.text+"</a></li>").appendTo(l.find("ul"))}),l.find("a").click(function(a){a.preventDefault(),d(this)}),0==a.length?l.find("p").showMe():l.find("p").hideMe(),b.onShow(),n=0,l.find("a:first").addClass("selected"),e()}function d(a){b.onSelect({id:$(a).attr("rel"),text:$(a).text()}),f(),g()}function e(){l.showMe().highlight()}function f(){l.hideMe()}function g(){l.find("a").removeClass("selected").end().find("ul").html("")}function h(){l.css({width:k.outerWidth(),top:k.offset().top+k.outerHeight(),left:k.offset().left})}function i(a){var b=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return a.replace(b,"\\$&")}var j,k=$(this),l=$('<div class="autocomplete hide"><p class="hide">'+b.blankMessage+"</p><ul></ul></div>").appendTo($("body")),m=!1,n=0;k.keyup(function(c){-1==jQuery.inArray(c.keyCode,[13,37,38,39,40,27])&&(k.addClass("querying"),window.clearTimeout(j),b.onTyping(),j=window.setTimeout(function(){m||(b.onQuery(),a())},b.offset),h())}),k.on("keydown.autocomplete",function(a){switch(a.keyCode){case 38:a.preventDefault(),n--,0>n&&(n=l.find("a").length-1);break;case 40:a.preventDefault(),n++,n>=l.find("a").length&&(n=0);break;case 13:a.preventDefault(),d(l.find("a.selected"));break;case 27:b.onClear(),k.blur(),g(),f()}l.find("a").removeClass("selected").end().find("a:eq("+n+")").addClass("selected")})}),this}},jQuery.fn.timeAgoInWords=function(){function a(a){var b=new Date;return b.setTime(Date.parse(a))}function b(a,b,c){var d=(a-b)/1e3,e=Math.floor(d/60);if("long"===c){if(0>=e)return"less than a minute ago";if(1===e)return"a minute ago";if(45>e)return e+" minutes ago";if(90>e)return"about 1 hour ago";if(1440>e)return"about "+Math.floor(e/60)+" hours ago";if(2880>e)return"1 day ago";if(43200>e)return Math.floor(e/1440)+" days ago";if(86400>e)return"about 1 month ago";if(525960>e)return Math.floor(e/43200)+" months ago";if(1051199>e)return"about 1 year ago"}if("short"===c){if(1>=e)return"just now";if(45>e)return e+" min ago";if(90>e)return"~1 hour ago";if(1440>e)return"~ "+Math.floor(e/60)+" hours ago";if(2880>e)return"1 day ago";if(43200>e)return Math.floor(e/1440)+" days ago";if(86400>e)return"~1 month ago";if(525960>e)return Math.floor(e/43200)+" months ago";if(1051199>e)return"~1 year ago"}return"over "+Math.floor(e/525960)+" years ago"}0!==this.length&&$(this).each(function(){var c=$(this).text();$(this).attr("title",c),"short"===$(this).data("timeFormat")?$(this).text(b(new Date,a(c),"short")):$(this).text(b(new Date,a(c),"long"))})},jQuery.fn.timeInCurrentZone=function(){if(0!==this.length){var a=function(a){var b,c=a%10,d=Math.floor(a/10)%10;if(1===d)b="th";else switch(c){case 1:b="st";break;case 2:b="nd";break;case 3:b="rd";break;default:b="th"}return a+b};$(this).each(function(){var b,c,d,e,f,g=new Date($(this).attr("datetime"));switch(g.getDay()){case 0:b="Sunday";break;case 1:b="Monday";break;case 2:b="Tuesday";break;case 3:b="Wednesday";break;case 4:b="Thursday";break;case 5:b="Friday";break;case 6:b="Saturday";break;default:b=!1}switch(g.getMonth()){case 0:c="January";break;case 1:c="February";break;case 2:c="March";break;case 3:c="April";break;case 4:c="May";break;case 5:c="June";break;case 6:c="July";break;case 7:c="August";break;case 8:c="September";break;case 9:c="October";break;case 10:c="November";break;case 11:c="December";break;default:c=!1}d=0===g.getHours()||12===g.getHours()?12:g.getHours()<12?g.getHours():g.getHours()-12,e=g.getHours()<12?"AM":"PM",f=g.getMinutes()<10?"0"+g.getMinutes():g.getMinutes(),$(this).text(b+", "+c+" "+a(g.getDate())+" at "+d+":"+f+" "+e)})}};var Curtain={opacity:.9,init:function(){0===$("#curtain").length&&$('<div id="curtain"></div>').hide().prependTo($("body"))},show:function(){Curtain.init(),$("#curtain").css("opacity",this.opacity).show()},hide:function(){$("#curtain").hide()}};jQuery.fn.hud=function(a){function b(a){var b=a.data("self"),c=a.data("settings"),d="large"===c.size?320:270;a.attr("class","").addClass("hud size-"+c.size),b.offset().left+a.width()>$(window).width()?a.addClass("align-right").css("right",$(window).width()-b.offset().left-b.outerWidth()+c.offset[0]):b.offset().left-a.width()/2<=0?a.addClass("align-left").css("left",b.offset().left-10):a.addClass("align-middle").css("left",b.offset().left-a.width()/2+b.outerWidth()/2),b.offset().top<d?a.addClass("below-element").css("top",b.offset().top+b.outerHeight()+4+c.offset[1]):a.addClass("above-element").css("bottom",$(window).height()-b.offset().top+4+c.offset[1])}if(0!=this.length){var c=jQuery.extend({type:"remote",size:"large",kind:"revision",name:"",container:"",offset:[0,0],onShow:function(){},onHide:function(){}},a);return $("body").width()<=480&&(c.size="small"),$(this).each(function(){function a(){m.off("click.toggleHUD").on("click.toggleHUD",function(a){a.preventDefault(),n.is(":hidden")?(a.stopPropagation(),$(".hud").each(function(){$(this).is(":hidden")||($(this).hide(),d(!1))}),h(),$(document).on("click.closeHUD",function(){d(!0)}),$("#preview iframe").contents().on("click.closeHUD",function(){d(!0)}),n.off("click.dontCloseHUD").on("click.dontCloseHUD",function(a){a.stopPropagation()})):d(!0)})}function d(a){$(document).off("click.closeHUD"),$("#preview iframe").contents().off("click.closeHUD"),a&&i()}function e(){"remote"==c.type?$.get(m.attr("href"),function(a){g(a)},"json"):""==jQuery.trim(k.html())?$.get(m.attr("href"),function(a){g(a),k.html(a)},"json"):g(k.html())}function f(){l=window.setTimeout(function(){i()},5e3),n.find(".wrapper").removeClass("loading").html(k.html()).end().mouseenter(function(){window.clearTimeout(l),i()}),h()}function g(a){n.find(".wrapper").html(a).removeClass("loading"),o=!0,c.onShow(n)}function h(){b(n),j(),n.data("status","visible"),o?c.onShow(n):e()}function i(){j(),n.data("status","hidden"),c.onHide(n)}function j(){n.animate({opacity:"toggle"},100,"linear")}var k,l,m=$(this),n=$('<div class="hud size-'+c.size+'" id="'+c.name+'"><div class="wrapper loading">Loading&hellip;</div><b class="hud-arrow"></b></div>').hide().appendTo($("body")),o=!1;return m.data("hud",n),n.data({status:"hidden",self:m,settings:c,url:m.attr("href")}),k=""==c.container?$("#"+m.attr("rel")):$(c.container),0!=k.length?"notice"==c.type?void window.setTimeout(function(){f()},500):void a():void 0}),$(window).resize(function(){$(".hud:visible").each(function(){b($(this))})}),this}},jQuery.fn.mask=function(a){return 0!=this.length?(void 0==a&&(a="show"),$(this).each(function(){function b(){f.show(),d()}function c(){f.hide()}function d(){f.css({top:e.position().top,left:e.position().left,width:e.width(),height:e.height(),opacity:.5})}var e=$(this);null==e.data("mask")&&e.data("mask",$('<div class="mask"></div>').hide().appendTo($("body")));var f=e.data("mask");"show"==a?b():c(),$(window).resize(d)}),this):void 0};var Tooltips={settings:{xOffset:10,yOffset:20},init:function(){if(!($("body").width()<=480)){var a='[rel=tooltip], a[rel="new-window"], a[rel="open-chat"]';$(document).on("mouseenter",a,function(a){if(void 0!==$(this).attr("title")&&""!==$(this).attr("title")){var b;$(this).data("title",$(this).attr("title")).attr("data-tooltip",!0).removeAttr("title"),$(".tooltip").remove(),b=$(document.createElement("div")).addClass("tooltip").text($(this).data("title")).hide().appendTo($("body")),$(this).data("show-timeout",window.setTimeout(function(){Tooltips.show(b,a)},100)),b.data("show-interval",window.setInterval(function(){$("[data-tooltip]").length||Tooltips.hide($(".tooltip:visible"))},500))}}).on("mouseleave",a,function(){void 0!==$(this).data("title")&&($(this).attr("title",$(this).data("title")).removeAttr("data-tooltip").removeData("title"),window.clearTimeout($(this).data("show-timeout")),Tooltips.hide($(".tooltip:visible")))}).on("mousemove",a,function(a){Tooltips.update(a,$(".tooltip:visible"))})}},show:function(a,b){a.fadeIn(100),Tooltips.update(b,a)},hide:function(a){a.length&&a.fadeOut(100,function(){window.clearInterval(a.data("show-interval")),a.remove()})},update:function(a,b){if(b.length){var c=0;a.pageX+Tooltips.settings.yOffset+b.outerWidth()+30>=$(window).width()&&(c=b.outerWidth()+30),b.css({top:a.pageY-Tooltips.settings.xOffset+"px",left:a.pageX+Tooltips.settings.yOffset-c+"px"})}}};$(document).ready(Tooltips.init);var URLCheck={warningTooLong:"The URL must be no more than %maxlength% characters. We converted it to:",warningHttp:"You only need to include the editable part of the URL:",warningInvalid:"Use only lowercase letters, numbers and dashes. We converted it to:",init:function(a){a.each(function(){URLCheck.setSyncInput($(this)),URLCheck.resetMaxLength($(this)),URLCheck.prefillWithValue($(this))}),a.keyup(function(){function b(){d.removeClass("field-ok field-error"),f.removeClass("form-error"),f.find("p.error-msg").length&&f.find("p.error-msg").remove(),f.find(".url-preview").off("click.correctInput")}function c(a){a=a.replace(/%maxlength%/,URLCheck.getMaxLength(d)),f.find("p.error-msg").length||$("<p></p>").addClass("error-msg").prependTo(f.find(".form-text")),f.find("p.error-msg").html(a)}var d=$(this),e=$(this).parent().find('input[type="hidden"]'),f=$(d).parents(".form-url"),g=$(d).val(),h=URLCheck.convert(d);g.length>0?g===h?(b(),d.addClass("field-ok")):(f.addClass("form-error"),d.removeClass("field-ok").addClass("field-error"),c(g.length>URLCheck.getMaxLength(d)?URLCheck.warningTooLong:"http:"===g.substr(0,5)||"https:"===g.substr(0,6)?URLCheck.warningHttp:URLCheck.warningInvalid),f.find(".url-preview").on("click.correctInput",function(){d.val(h),a.keyup()})):(b(),h=null),e.val(h),f.find(".url-input").html(h)})},setSyncInput:function(a){$(document.createElement("input")).attr({type:"hidden",name:a.attr("name")}).val(URLCheck.convert(a)).prependTo(a.removeAttr("name").parent())},resetMaxLength:function(a){void 0===a.data("maxlength")&&void 0!==a.attr("maxlength")&&a.data("maxlength",a.attr("maxlength")).removeAttr("maxlength")},getMaxLength:function(a){return URLCheck.resetMaxLength(a),-1===a.data("maxlength")?524288:a.data("maxlength")},prefillWithValue:function(a){""!==a.val()&&a.parents(".form-url").find(".url-input").html(URLCheck.convert(a))},convert:function(a){var b=a.val(),c=a.data("allowUnderscore")?!0:!1,d=a.data("allowMultipleDashes")?!0:!1;return b=b.replace(/^\s*/g,"").replace(/[^\w]/g,"-").toLowerCase().substr(0,URLCheck.getMaxLength(a)),c||(b=b.replace(/_/g,"-")),d||(b=b.replace(/\-{2,}/g,"-")),b.match(/^-/g)&&(b=b.replace(/^-/g,"")),b.match(/-$/g)&&(b=b.replace(/-$/g,"")),b}};$.fn.URLCheck=function(a){return $(this).length?URLCheck[a]?URLCheck[a](this):"object"!=typeof a&&a?(console.log("Method "+a+" does not exist on jQuery.URLCheck"),this):(URLCheck.init(this),this):void 0};var PasswordStrength={previousOutput:"",init:function(){function a(){""!==$(c).val()&&(PasswordStrength.resetStatus(c),PasswordStrength.checkConfirmation(b,c,d))}var b=$('#strong-password input[type="password"]'),c=$('#password-repeat input[type="password"]'),d=$(".password-strength"),e=!1;if(b.length&&c.length&&d.length){var f={setup:function(){var a=this;this.authenticityToken=$("[name=authenticity_token]")[0].value,this.cancel(),this.loading(),this.timeoutID=window.setTimeout(function(){a.check()},750)},cancel:function(){"number"==typeof this.timeoutID&&(window.clearTimeout(this.timeoutID),delete this.timeoutID)},loading:function(){$(d).addClass("loading").html("")},check:function(){var a={};this.cancel(),["first_name","last_name","login","email"].forEach(function(b){$("#user_"+b).length&&(a[b]=$("#user_"+b).val())}),$.post("/password/errors.html",{password:$(b).val(),user:a,authenticity_token:this.authenticityToken},function(a){$(d).removeClass("loading").html(a),b.data("requireStrong")&&($(d).find(".psw-label-weak").length?PasswordStrength.fieldStatus(b,!1):PasswordStrength.fieldStatus(b,!0))})}};b.parents(".form-row").hasClass("form-error")&&b.parents(".form-row").find(".error-msg").length&&(e=!0),b.keypress(function(c){(!c.metaKey&&!c.ctrlKey&&9!==c.keyCode&&37!==c.keyCode&&38!==c.keyCode&&39!==c.keyCode&&40!==c.keyCode||118===c.which||86===c.which)&&(a(),e&&($(b).parents(".form-row").removeClass("form-error").find(".error-msg").hide(),e=!1),d.showMe(),f.setup())}).keyup(function(b){a(),""===$(this).val()&&d.hideMe(),""===$(this).val()||8!==b.keyCode&&46!==b.keyCode||f.setup()}),c.keyup(function(){(!b.data("requireStrong")||b.hasClass("field-ok"))&&(!$(this).hasClass("field-error")&&!$(this).hasClass("field-ok")&&$(this).val().length<$(b).val().length||PasswordStrength.checkConfirmation(b,c,d))}).blur(function(){(!b.data("requireStrong")||b.hasClass("field-ok"))&&""!==$(b).val()&&PasswordStrength.checkConfirmation(b,c,d)})}},fieldStatus:function(a,b){b?a.removeClass("field-error").addClass("field-ok"):a.removeClass("field-ok").addClass("field-error")},resetStatus:function(a){a.removeClass("field-error field-ok"),$(".password-confirm").addClass("hide").html("")},checkConfirmation:function(a,b,c){var d=$(".password-confirm").length?$(".password-confirm"):c,e='<span class="psw-label psw-label-weak">Your password confirmation doesn’t match entered password.</span>';d===c&&d.html().toLowerCase()!==e.toLowerCase()&&(this.previousOutput=d.html()),$(b).val()===$(a).val()?(PasswordStrength.fieldStatus(b,!0),""!==this.previousOutput&&d.html(this.previousOutput)):(PasswordStrength.fieldStatus(b,!1),d.html(e).showMe())}};$(document).ready(PasswordStrength.init);var Helpers={init:function(){$('.new-window, a[rel="new-window"], a[rel="open-chat"]').each(function(){$(this).attr("target","_blank"),void 0===$(this).attr("title")&&$(this).attr("title","Opens a new window.")}),$(document).on("click.openChat",'a[rel="open-chat"]',function(a){a.preventDefault(),chat=window.open($(this).attr("href"),"Chat","width=520,height=380,toolbar=no,status=no,scrollbars=no,resizable=no"),chat.focus()}),$(document).on("click.print",'a[rel="print"]',function(a){a.preventDefault(),window.print()}),$(".notification.email-bounce .action-hide a").click(function(a){a.preventDefault();var b=$(this);$(".notification.email-bounce").hide(),$.post(b.attr("href"),{_method:b.attr("rel"),authenticity_token:b.data("authenticityToken")})}),$(".hide-announce a").click(function(a){a.preventDefault();var b=$(this);$(".announce").hide(),$.post(b.attr("href"),{_method:b.attr("rel"),authenticity_token:b.data("authenticityToken")})}),$(document).on("click.toggleEls",".js-toggle-trigger",function(a){a.preventDefault();var b=$(this).data("toggle-targets");Helpers.toggleEls($(this),$(b))}),$(document).on("change.toggleEls",".js-toggle-checkbox",function(){var a=$(this).data("toggle-targets");Helpers.toggleEls($(this),$(a))}),Helpers.footerBelowFold(),Helpers.openInApp(),Helpers.browserSupport(),Helpers.upsell(),Helpers.setupSmoothAnchors(),Helpers.linksWithSelectFeature(),$("span.time").timeAgoInWords()},toggleEls:function(a,b){var c,d;b.parents(".js-qs-w-filter").each(function(a,b){"undefined"!=typeof QuickSearch&&QuickSearch.cleanup($(b),$(b).find(".js-qs-list > *"),{})}),b.each(function(a,b){$(b).toggleMe().toggleClass("js-qs-hide-permanently")}),void 0!==a.data("toggle-class")&&a.toggleClass(a.data("toggle-class")),void 0!==a.data("alt-trigger")&&(c=a.text(),a.text(a.data("alt-trigger")).data("alt-trigger",c)),a.data("focus-on-show")&&(d=b.find(':input:not([type="hidden"]):first').focus(),void 0!==d.attr("type")&&"text"===d.attr("type").toLowerCase()&&d.selectRange(d.val().length)),b.find(".js-scrollable").each(function(a,b){Helpers.initScroll($(b))}),b.parents(".js-scrollable").each(function(a,b){Helpers.hasScrolling($(b))?Helpers.updateScroll($(b)):Helpers.initScroll($(b))})},footerBelowFold:function(){function a(){$(".content, #sidebar").css("min-height",$(window).height()-$(".header").height()),$(".footer").addClass("is-visible")}$("#specialPage").length||($("#container").height()<$(window).height()&&a(),$(window).on("resize.hideFooterBelowFold",a).trigger("resize.hideFooterBelowFold"))},openInApp:function(){$("p.open-in-app").length&&"mac"==Helpers.getOS()&&$("p.open-in-app").showMe()},browserSupport:function(){var a=/(msie) ([\w.]+)/,b=a.exec(navigator.userAgent.toLowerCase())||[];b[1]&&b[2]<9&&$("body").prepend('<div class="global-notification"><p>Seriously, you still use IE '+b[2]+'? To help improve your life, we recommend taking a look at <a href="https://www.google.com/chrome">Google Chrome</a> instead.</p></div>')},upsell:function(){$(".notifier .link-hide, .message .link-hide").click(function(a){a.preventDefault();var b=$(this);b.parents(".notifier").hide(),b.parents(".blank-slate").hide(),$.post(b.attr("href"),{_method:b.attr("rel"),authenticity_token:b.data("authenticityToken")})})},setupSmoothAnchors:function(){$(".smooth-anchor").each(function(){var a=$(this);a.click(function(b){Helpers.smoothScrollingEvent(b,a)})})},smoothScrollingEvent:function(a,b){var c=-10;a.preventDefault(),$.smoothScroll({scrollTarget:$(b.prop("hash")),offset:parseInt(c)}),$.bbq.pushState("#"+b.prop("hash"))},linksWithSelectFeature:function(){$(".select-on-click, .url-preview-wrap").click(function(a){a.preventDefault(),$(this).selectText()})},toggleEls:function(a,b){var c,d;b.each(function(a,b){$(b).toggleMe()}),void 0!==a.data("toggle-class")&&a.toggleClass(a.data("toggle-class")),void 0!==a.data("alt-trigger")&&(c=a.text(),a.text(a.data("alt-trigger")).data("alt-trigger",c)),a.data("focus-on-show")&&(d=b.find(':input:not([type="hidden"]):first').focus(),void 0!==d.attr("type")&&"text"===d.attr("type").toLowerCase()&&d.selectRange(d.val().length)),b.find(".js-scrollable").each(function(a,b){Helpers.initScroll($(b))}),b.parents(".js-scrollable").each(function(a,b){Helpers.hasScrolling($(b))?Helpers.updateScroll($(b)):Helpers.initScroll($(b))})},getOS:function(){var a="mac",b=navigator.platform;return(-1!=b.search(/iPhone/gi)||-1!=b.search(/iPod/gi)||-1!=b.search(/iPad/gi))&&(a="ios"),-1!=b.search(/Mac/gi)&&(a="mac"),-1!=b.search(/Win/gi)&&(a="win"),(-1!=b.search(/Linux/gi)||-1!=b.search(/Unix/gi))&&(a="nix"),a},convertUrlToArray:function(){var a=[],b=window.location.search.substring(1).split("&");return window.location.search.length&&$(b).each(function(c){a[c]=[];var d=b[c].split("=");a[c][0]=decodeURIComponent(d[0]),a[c][1]=d.length>1?decodeURIComponent(d[1]):null}),a},convertArrayToUrl:function(a){$(a).each(function(b){a[b]=a[b].join("=")}),window.location.search=a.join("&")},getParamValue:function(a){var b,a=decodeURIComponent(a),c=Helpers.convertUrlToArray();return $(c).each(function(d){a==c[d][0]&&(b=c[d][1])}),b},isKeyExist:function(a){var b=Helpers.convertUrlToArray(),c=!1;return $(b).each(function(d){b[d][0]==a&&(c=!0)}),c},addParam:function(a,b){var c=Helpers.convertUrlToArray();$(c).each(function(d){c[d][0]==a&&c[d][1]!=b&&(c[d][1]=b)}),Helpers.isKeyExist(a)||c.push([a,b]),Helpers.convertArrayToUrl(c)},deleteParam:function(a){var b=Helpers.convertUrlToArray();$(b).each(function(c){b[c][0]==a&&(b.splice(c,1),Helpers.convertArrayToUrl(b))})}};$(document).ready(Helpers.init),jQuery.fn.extend({showMe:function(){return this.removeClass("hide")},hideMe:function(){return this.addClass("hide")},toggleMe:function(){return this.toggleClass("hide")},isHidden:function(){return this.hasClass("hide")?!0:!1},highlight:function(){return this.css("opacity",0).animate({opacity:1},250)},pulsate:function(){return this.animate({opacity:0},250).animate({opacity:1},250).animate({opacity:0},250).animate({opacity:1},250)},exists:function(){return 0==this.length?!1:!0},centerize:function(){return this.css({top:$(window).height()/2-this.innerHeight()/2+"px",left:$(window).width()/2-this.innerWidth()/2+"px"})},disable:function(){return this.addClass("loading")},enable:function(){return this.removeClass("loading")},randomID:function(){var a="id-"+(new Date).getTime().toString();return this.attr("id",a),a},selectText:function(){var a,b,c=this[0];"INPUT"===c.tagName?c.select():document.body.createTextRange?(a=document.body.createTextRange(),a.moveToElementText(c),a.select()):window.getSelection&&(b=window.getSelection(),a=document.createRange(),a.selectNodeContents(c),b.removeAllRanges(),b.addRange(a))}}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){"use strict";var c,d;for(c=0,d=this.length;d>c;++c)c in this&&a.call(b,this[c],c,this)});var Header={init:function(){var a=$(".search-main .search-field"),b=$(".search-main .search-reset"),c=$(".a-advanced-search"),d=$(".a-advanced-filter");Header.limitLongTitles(),$(".dropdown").on("click",".dropdown-list--users a",function(a){a.preventDefault(),Header.filterByUser($(this))}),a.data("placeholder",a.attr("placeholder")).keyup(function(){""!==$(this).val()&&b.showMe(),""===$(this).val()&&c.is(":visible")&&b.hideMe()}),b.on("click touchend",function(e){e.preventDefault(),Header.resetSearch(a,b,c,d)})},limitLongTitles:function(){if($(".header-main--limited").length){var a=$(".mainnav").outerWidth()+"px";$(".mainnav").css("margin-right","-"+a),$(".header-main").css("padding-right",a).animate({opacity:1},75)}},filterByUser:function(a){var b=$(".search-main .search-field"),c=$(".search-main .search-reset"),d=$(".a-advanced-search"),e=$(".a-advanced-filter"),f=a.find("u").text();$("#search-by-user").val(a.data("id")),Dropdown.hide(a.parents(".dropdown")),d.hideMe(),e.showMe().find("img").remove().end().prepend(a.find("img").clone()),b.attr("placeholder","Search by "+f).focus(),c.showMe()},resetSearch:function(a,b,c,d){$("#search-by-user").val(""),c.showMe(),d.hideMe().find("img").remove(),a.attr("placeholder",a.data("placeholder")).val("").focus(),b.hideMe()}};$(document).ready(Header.init);var Dropdown={init:function(){$(".dropdown").attr("tabindex",-1),$(".js-open-dropdown").click(function(a){a.preventDefault(),a.stopPropagation(),Dropdown.decide($(this))}),Dropdown.shortcuts()},decide:function(a){var b="#"+a.data("dropdown");$(b).is(":visible")?Dropdown.hide($(b),a):Dropdown.show($(b),a,function(){QuickSearch.init($(b))})},show:function(a,b,c){a.showMe().focus(),b.addClass("is-open"),Dropdown.prepare(a,b),a.is(":empty")?Dropdown.load(a,b,c):c()},load:function(a,b,c){if(!a.data("prepared")){a.data("prepared",!0);var d="dropdown--loading";a.addClass(d),$.getJSON(b.attr("href"),function(e){a.removeClass(d);var f,g,h=$(b).data("dropdown"),i="";"advanced-search"===h&&(g="Search by user",i="dropdown-list--users",f=Dropdown.generateSearchFilter(e)),"recent-repositories"===h&&(g="Repository name",f=Dropdown.generateRepositories(e)),"recent-environments"===h&&(g="Environment name",f=Dropdown.generateEnvironments(e)),"recent-environments"===h&&e.length<=5||a.append('<form method="get" autocomplete="off"><fieldset class="quick-search"><input type="search" placeholder="'+g+'" class="search-field js-qs-field" /></fieldset></form>'),a.append(f.addClass("dropdown-list js-qs-list "+i)),"undefined"!=typeof c&&c()})}},generateSearchFilter:function(a){var b=$(document.createElement("ul"));return $.each(a,function(a,c){b.append('<li><a href="#" data-id="'+c.id+'"><span class="userpic size-medium"><img src="'+c.userpic+'" alt="" /><b></b></span> <u>'+c.fullname+'</u> <span class="username">'+c.username+"</span></a></li>")}),b},generateRepositories:function(a){var b=$(document.createElement("ul"));return $.each(a,function(a,c){b.append('<li><a href="'+c.uri+'"><span class="color-label"><b class="label-'+c.color+'"></b></span> <u>'+c.title+"</u></a></li>")}),b},generateEnvironments:function(a){var b=$(document.createElement("ul"));return $.each(a,function(a,c){b.append('<li><a href="'+c.uri+'"><i class="label-'+c.color+'"></i> <u>'+c.title+"</u></a></li>")}),b},prepare:function(a,b){a.on("click.insidePopup touchend.insidePopup",function(a){a.stopPropagation()}),$(document).on("click.outsidePopup touchend.outsidePopup",function(c){Dropdown.hide(a,b)}),$(document).on("keyup.hideByEsc",function(c){27===c.keyCode&&Dropdown.hide(a,b)})},hide:function(a,b){$(document).off("keyup.hideByEsc click.outsidePopup touchend.outsidePopup"),a.off("click.insidePopup touchend.insidePopup").hideMe(),"undefined"!=typeof b&&b.removeClass("is-open"),QuickSearch.cleanup(a)},shortcuts:function(){var a="mac"===Helpers.getOS()?"Ctrl":"Alt",b=$('.js-open-dropdown[data-dropdown="recent-repositories"]');b.attr("title",b.attr("title")+" ("+a+"+r)"),$(document).on("keydown.openRepositories",null,a+"+r",function(){Dropdown.decide(b)})}};$(document).ready(Dropdown.init),$(window).on("load",function(){$(".js-open-dropdown").each(function(){"#"!==$(this).attr("href")&&Dropdown.load($("#"+$(this).data("dropdown")),$(this))})});var QuickSearch={init:function(a){var b=a.find(".js-qs-field"),c=a.find(".js-qs-list");b.keyup(function(){QuickSearch.filter($(this),c)}).keyup().focus()},filter:function(a,b){var c=b.children("li"),d=c.map(function(){return $(this).text().toLowerCase()}),e=$.trim(a.val().toLowerCase()),f=[];e?(c.hideMe(),d.each(function(a){var b=this.score(e);b>0&&f.push([b,a])}),$.each(f.sort(function(a,b){return b[0]-a[0]}),function(){$(c[this[1]]).showMe()})):c.showMe(),this.limit(a,b,10)},limit:function(a,b,c){var d=a.parents("form"),e=a.parents(".dropdown"),f=b.find("li:visible");d.submit(function(){return!1}),e.find(".total, .empty").remove(),f.length>=c&&f.each(function(a){a>=c&&$(this).hideMe()}),1===f.length&&d.submit(function(){var a=f.find("a");$(this).parents("#advanced-search").length?Header.filterByUser(a):location.href=a.attr("href")}),0===f.length&&$("<p />").addClass("empty").text("No matching results.").appendTo(e),f.length>c&&$("<p />").addClass("total").text("Search for "+(f.length-c)+" more.").appendTo(e)},cleanup:function(a){a.find(".js-qs-field").val("").keyup().blur()}},Browse={init:function(){Browse.preloadJSON(),$("#change-revision, #diff-to").each(function(){var a=$(this);a.hud({type:"local",size:"large",onShow:function(a){Revisions.load(a,function(a){a.parent().hasClass("selected")||(window.location.href=a.attr("href"))})},onHide:function(a){Revisions.reset(a)}})}),$("#change-branch, #change-tag").each(function(){var a,b=$(this);"change-branch"===b.attr("id")&&(a="branch"),"change-tag"===b.attr("id")&&(a="tag"),b.hud({type:"local",kind:a,onShow:function(a){Revisions.load(a,function(a){a.parent().hasClass("selected")||(window.location.href=a.attr("href"))})},onHide:function(a){Revisions.reset(a)}})}),$("a.action-settings, .code-toolbar .settings a").each(function(){var a=$(this);a.hud({type:"local",size:"small",onShow:function(a){a.find(".setting-lang").length&&Browse.fileLanguage(),a.find(".setting-whitespace").length&&Browse.ignoreWhitespaces()}})}),Browse.path()},preloadJSON:function(){$("#change-branch, #change-tag, #change-revision, #diff-to").each(function(){$.getJSON($(this).attr("href"))})},path:function(){if(1!=$(".code-toolbar .path a:first strong").length){var a=5;$(".code-toolbar .path").each(function(){var b=$(this),c=b.find("a");
c.length-1<=a||(b.find("a:gt(0):lt("+(c.length-a)+")").remove(),b.find("span").remove().end().find("a:eq(0)").after("<span>.../</span>").end().find("a").after("<span>/</span>"))})}},updateToolbar:function(a){$.get(a,function(a){$(".toolbar").append(a).find(".loading").remove()},"html")},getCommitMessage:function(a,b){jQuery.getJSON(a,function(a){$(b).find(".br-author").html(a.author),$(b).find(".br-date").html(a.time),$(b).find(".br-cmt").html(a.message).removeClass("loading")})},getCommits:function(a){jQuery.getJSON(a,function(a){jQuery.each(a,function(a,b){var c=$("."+b.id);c.find(".br-rev").html(b.link),c.find(".br-date").html(b.time),c.find(".br-author").html(b.author),c.find(".br-cmt").html(b.message).removeClass("loading")})})},fileLanguage:function(){var a="lang";Helpers.isKeyExist(a)&&$('.viewer-settings select option[value="'+Helpers.getParamValue(a)+'"]').prop("selected",!0),$(".viewer-settings select").change(function(){""!=$(this).val()?Helpers.addParam(a,$(this).val()):Helpers.deleteParam(a)})},ignoreWhitespaces:function(){var a="ignore_ws";Helpers.isKeyExist(a)&&"true"===Helpers.getParamValue(a)&&$(".setting-whitespace input").prop("checked",!0),$(".setting-whitespace input").change(function(){$(this).is(":checked")?Helpers.addParam(a,"true"):Helpers.deleteParam(a)})}};$(document).ready(Browse.init);var Case={init:function(){$(document).on("click.toggleTicket","#help .support-options a:first, #submit-case .form-submit a",function(a){a.preventDefault(),Case.toggle()}).on("submit.sendTicket","#submit-case form",function(a){a.preventDefault();var b=$(this);return""==b.find("textarea").val()?void b.find(".form-error").showMe():(b.find(".form-error").hideMe(),void Help.minimize(function(){$("#help").addClass("loading").find(".scroll-area .wrapper").html(""),$.post(b.attr("action"),b.serialize(),function(a){$("#help").removeClass("loading").find(".scroll-area .wrapper").html(a)})}))})},toggle:function(){$("#submit-case").is(":visible")?($("#submit-case").fadeOut(200),Help.minimize(function(){$("#help-overview").fadeIn(200)})):($("#help-overview").fadeOut(200),Help.maximize(function(){$("#submit-case").fadeIn(200)}))}};$(document).ready(Case.init);var CreateRepository={init:function(){$("#repository-title input").keyup(function(){$('#repository-url input[type="url"]').val($(this).URLCheck("convert")).keyup()}),$("#repository-type-selector input").change(function(){$(".wizard-progress, .url-preview-wrap").hideMe(),"subversion"===$(this).val()&&$(".type-svn").showMe(),"mercurial"===$(this).val()&&$(".type-hg").showMe(),"git"===$(this).val()&&$(".type-git").showMe()}),CreateRepository.dataImport()},dataImport:function(){$("#data-import").length&&($('#data-import input[type="radio"]:checked').parents(".import-option").find(".details").showMe(),$('#data-import input[type="radio"]').change(function(){$(".details").hideMe(),$(this).parents(".import-option").find(".details").showMe()}))}};$(document).ready(CreateRepository.init),$(function(){$("#create-new-environment, #choose-existing-environment").click(function(a){a.preventDefault(),$("#existing-environment, #new-environment").toggleMe()}),$("#choose-environment .form-buttons input").click(function(a){return a.preventDefault(),$("#new-environment").isHidden()?(window.location.href="?environment_id="+$("#existing-environment select").val()+"&server_type="+$("#server_type_field").val(),!1):void $("#choose-environment").submit()}),0!=$("#password-or-key").length&&$('#password-or-key input[type="checkbox"]').click(function(){$(this).is(":checked")?($("#password-or-key").find('input[type="password"]').prop("disabled",!0),$("#public-key").showMe()):($("#password-or-key").find('input[type="password"]').prop("disabled",!1),$("#public-key").hideMe())})});var Dashboard={init:function(){Dashboard.loadUpdatedEnvironments(),$(".indv-deploy_desc").find("a").on("click",function(a){$(this).closest(".indv-deploy--waiting, .indv-deploy--pending, .indv-deploy--skipped").length&&a.preventDefault()})},loadUpdatedEnvironments:function(){var a=$(".js-load-updated-envs");a.length&&a.load(a.data("updated-envs-uri"),function(){Dashboard.navigateReadyEnvs(),a.find(".time").timeAgoInWords()})},reloadDeploymentStatus:function(a){var b="indv-deploy--",c=["waiting","pending","failed","skipped"],d=$("#"+a.id),e=d.find(".indv-deploy_badge");d.length&&(c.forEach(function(a,c){d.removeClass(b+a)}),d.addClass(b+a.status),e.attr("title",a.title))},navigateReadyEnvs:function(){function a(){e.css("margin-left",-100*i+"%")}function b(){var a=$(".indv-deploy-nav--prev"),b=$(".indv-deploy-nav--next");0===i?a.hideMe():a.showMe(),i===f.length-1?b.hideMe():b.showMe(),d()}function c(){var a=h.find(".slides-counter_indicator");if(h.empty(),f.length>1){for(var b=0;b<f.length;b++)h.append(a.showMe().clone());d()}}function d(){var a=h.find(".slides-counter_indicator");a.removeClass("is-current").eq(i).addClass("is-current")}var e=$(".indv-deploy-sets"),f=$(".indv-deploy-set"),g=Math.round(100/f.length*100)/100,h=$(".slides-counter"),i=0;$(".indv-deploy-sets").css("width",100*f.length+"%"),$(".indv-deploy-set").css("width",g+"%"),b(),c(),$(document).on("click",".js-dashboard-ready-prev",function(c){c.preventDefault(),i>0?i-=1:i=0,a(),b()}).on("click",".js-dashboard-ready-next",function(c){c.preventDefault(),i<f.length-1?i+=1:i=0,a(),b()})}};$(document).ready(Dashboard.init);var Deployments={init:function(){$("#deployments-overview").length&&$(".link-deploy a.disabled").removeAttr("href").click(function(a){a.preventDefault()}),$("#deployments-activity").on("click",'[rel="retry-deployment"]',function(a){a.preventDefault(),Deployments.retry($(this))}).on("click",'[rel="cancel-deployment"]',function(a){a.preventDefault(),confirm("Are you sure?")&&Deployments.cancel($(this))}),Deployments.start_refreshing(),Deployments.rootWarning(),Deployments.sftpPathWarning(),$(".deployment-details").length&&($("a.show-revisions").click(function(a){a.preventDefault(),Helpers.addParam("show_all_revs","true")}),$("a.show-files").click(function(a){a.preventDefault(),Helpers.addParam("show_all_files","true")})),$(".servers-list").length&&$("a.link-delete").click(function(a){return a.preventDefault(),confirm("Are you sure you want to delete this server?")?($(this).parent().append('<form class="hidden" method="post" action="'+$(this).attr("href")+'"><input type="hidden" name="_method" value="delete" /><input type="hidden" name="authenticity_token" value="'+$(this).attr("name")+'" /></form>'),void $(this).parent().find("form").submit()):!1})},rootWarning:function(){var a=$("#release_server_login");a.length&&($(document.createElement("p")).hide().addClass("warning").html("Using the <b>root</b> user for regular tasks is dangerous. Please create a new user specially for deployments.").appendTo(a.parent()),a.blur(function(){"root"===$(this).val()?$(this).parent().find("p.warning").slideDown("fast"):$(this).parent().find("p.warning").slideUp("fast")}))},sftpPathWarning:function(){var a=$("#repo-path"),b=$("#release_server_protocol");!a.length||"sftp"!==b.val()&&"atomic_digital_ocean"!==b.val()&&"atomic"!==b.val()||($(document.createElement("p")).hide().addClass("warning").html("Using <b>/</b> path for SFTP usually points to your server's root directory which regular users don't have access to. Most likely you need a full path here.").appendTo(a.parent()),a.blur(function(){"/"===$(this).val()?$(this).parent().find("p.warning").slideDown("fast"):$(this).parent().find("p.warning").slideUp("fast")}))},start_refreshing:function(){$("#deployments-activity").length&&(Deployments.activity_interval=window.setInterval(function(){$(".status-waiting, .status-pending, .status-deploying").length&&Deployments.refreshActivity()},5e3))},refreshActivity:function(){$("#deployments-activity").length&&Deployments.refresh($("#deployments-activity"))},stop_refreshing:function(){Deployments.activity_interval&&clearInterval(Deployments.activity_interval)},retry:function(a){a.parent().addClass("loading"),$.post(a.attr("href"),{_method:"put",authenticity_token:$("meta[name=token]").attr("content")},function(b){a.parents(".release-item").before(b),a.parents(".release-item").remove()})},cancel:function(a){a.parent().addClass("loading"),$.post(a.attr("href"),{_method:"delete",authenticity_token:$("meta[name=token]").attr("content")},function(b){a.parents(".release-item").before(b),a.parents(".release-item").remove()})},refresh:function(a){var b=$("#deployments-activity");$.get(a.attr("action"),a.serialize(),function(a){b.html(a).removeClass("loading")},"html")}};$(document).ready(Deployments.init);var Forms={init:function(){$("a.confirm").click(function(a){confirm($(this).attr("rel"))||a.preventDefault()}),$(".js-prevent-double-submit").on("submit",function(){$(this).find("input[type=submit]").prop("disabled",!0)}),$(".js-checkbox-toggle").change(function(){var a=$(this).data("toggleEl"),b=$(this).parents("label");$(this).is(":checked")?(b.addClass("active"),$(a).showMe()):(b.removeClass("active"),$(a).hideMe())}),$(".js-select-toggle").change(function(){$(this).find("option").each(function(){$("#"+$(this).val()).hideMe().prop("disabled",!0)}),$("#"+$(this).val()).showMe().prop("disabled",!1)}),$(".js-alt-fields").on("focus",function(){var a=$(this).closest(".altfields-item"),b=a.siblings(".altfields-item");b.removeClass("is-selected"),a.addClass("is-selected").find(":radio").prop("checked",!0)}),$('.form-url input[type="url"]').URLCheck(),$(".js-show-inline-form").on("click",function(a){a.preventDefault();var b=$(this).attr("href");$(this).addClass("disabled"),$(b).showMe()}),$(".js-hide-inline-form").on("click",function(a){a.preventDefault();var b=$(this).closest("form");$('.js-show-inline-form[href="#'+b.attr("id")+'"]').removeClass("disabled"),b.hideMe(),Forms.resetForm(b)}),Forms.ownerChange(),Forms.colorLabelPreview(),Forms.loading(),Forms.toggle(),Forms.cloneServer(),Forms.creditCardType(),Forms.integrations()},hideValidationErrors:function(a){a.find(".error-msg").remove().end().find(".form-error").removeClass("form-error")},resetForm:function(a){a[0].reset(),Forms.hideValidationErrors(a)},ownerChange:function(){$("#account-owner select").data("owner",$("#account-owner select").val()),$("#account-owner select").change(function(){$(this).val()!=$(this).data("owner")?$(".message").showMe().highlight():$(".message").hideMe()})},colorLabelPreview:function(){$("#label-preview").siblings("select").change(function(){"environment"===$(this).data("scope")?$('.toolbar-title i[class^="label-"]').attr("class","label-"+$(this).val()):$(".header-title .color-label b").attr("class","label-"+$(this).val()),$("#label-preview.rev-repo").attr("class","rev-repo label-"+$(this).val()),$("#label-preview b").attr("class","label-"+$(this).val()),$("#label-preview i").attr("class","label-"+$(this).val())})},loading:function(){if($(".forms .form-buttons input, .form-buttons.has-loader input").click(function(a){a.preventDefault(),$(this).parent().addClass("loading").end().parents("form").submit()}),0!=$(".loading-indicator").length){$("form").submit(function(a){$(".loading-indicator").showMe(),$(this).hideMe()})}},toggle:function(){$(".form-toggle a").click(function(a){a.preventDefault(),$(this).parents(".form-row").find(".form-field").length>0?$(this).parents(".form-row").find(".form-field").toggleMe():$(this).parents(".form-row").next(".form-row").toggleMe(),$(this).parents(".form-toggle").toggleClass("show")})},cloneServer:function(){function a(){c.first().showMe().find("option:first").prop("selected",!0)}var b=$(".js-clone-repositories"),c=$(".js-clone-servers");b.length&&c.length&&(a(),b.on("change",function(){var b=$(this).val();c.hideMe().prop("disabled",!0),""!==b?$("#"+b).showMe().prop("disabled",!1):a()}))},creditCardType:function(){function a(a){return/^5[1-5]/.test(a)?"mastercard":/^4/.test(a)?"visa":/^3[47]/.test(a)?"amex":void 0}$(".cc-num").on("keyup blur",function(){var b=a($(this).val().replace(/[ -]/g,"")),c=$(".cc-type li"),d="current";c.removeClass(d),void 0!==b&&$(".cc-"+b).addClass(d)})},integrations:function(){function a(){$(".integration-form").hideMe(),$(".integration-accounts").showMe(),$(".integration-actions .button").removeClass("disabled")}$(".integration").on("click",".js-show-integration",function(b){if(b.preventDefault(),!$(this).hasClass("disabled")){a(),$(this).hasClass("button")&&$(this).addClass("disabled");var c=$($(this).prop("rel"));c.toggleMe(),c.find(":input").filter(":first").focus()}}).on("click",".js-hide-integration",function(b){b.preventDefault(),a()})}};$(document).ready(Forms.init);var Help={init:function(){$("#help").data("current",!1),0==$("#help").length&&$('<div id="help"><div class="wrapper"><a href="#" class="close-help" style="display: none;">Close</a><div class="scroll-area"><div class="wrapper"></div></div></div></div>').hide().appendTo($("body")),$(document).on("click","a[rel=help]",function(a){a.preventDefault(),$(this).hasClass("maximize")&&$("#help").css("width",450),Help.load(this)}),$("#help .close-help").click(function(a){a.preventDefault(),Help.hide()})},load:function(a){return $("#help").data("current")==a?void Help.hide():(Help.show(),Help.refresh(),$("#help").data("current",a),void $("#help .scroll-area .wrapper").html("").load($(a).attr("href"),function(){$("#help").removeClass("loading"),Help.reset()}))},show:function(){$("#help").addClass("loading").animate({right:0,visible:"show"},250,function(){$("#help .close-help").show()})},hide:function(){$("#help .close-help").hide(),$("#help").animate({right:-($("#help").width()+40),width:300,visible:"hide"},250).data("current",!1)},maximize:function(a){$("#help").animate({width:450},250,function(){Help.reset(),Help.refresh(),a()})},minimize:function(a){$("#help").animate({width:300},250,function(){Help.reset(),Help.refresh(),a()})},refresh:function(){$("#help .scroll-area").css("height",$(window).height()-20)},reset:function(){$("#help .scroll-area").jScrollPane()},resize:function(){if($("#help .scroll-area").css("height",$(window).height()-20+"px"),!$("#help").isHidden()&&void 0!=$("#help .scroll-area").data("jsp")){$("#help .scroll-area").data("jsp").reinitialise()}}};$(document).ready(Help.init),$(window).resize(Help.resize),$(function(){$(".b-show-log").click(function(a){a.preventDefault(),$("#incident-log").toggleMe()})}),$(function(){0!=$("#invoice-preview").length&&$("textarea").keyup(function(){$("#invoice-preview pre").remove(),$("<pre>"+$(this).val().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</pre>").appendTo($("#invoice-preview"))})});var Integration={init:function(){Integration.shopify()},shopify:function(){function a(a){var b=$("#release_server_login").val(),c=$("#release_server_password").val(),d=$("#release_server_bucket_name").val(),e=$("#release_server_oauth_token").val(),f=$("#release_server_id").val(),g=$("#shopify-theme-error"),h=$("#shopify-theme"),i=h.siblings(".icon-loading");if(a.data("prev-value")!==a.val()&&(a.data("prev-value",a.val()),""!==b&&""!==c&&""!==d)){var j=a.parents("fieldset").data("check-shopify-uri"),k={api_key:b,password:c,store_url:d,oauth_token:e,release_server_id:f};h.prop("disabled",!0),i.showMe(),$.get(j,k).always(function(){i.hideMe(),h.prop("disabled",!1)}).done(function(a){g.hideMe(),h.html(a).find("option:first").prop("selected",!0)}).fail(function(){g.showMe()})}}function b(){var b=$(this);window.setTimeout(function(){a(b)},100)}$(".js-shopify-theme").on("change",function(){"create_new"===$(this).val()?($("#new-theme input, #new-theme select").prop("disabled",!1),$("#new-theme").showMe().find("input:visible:first").focus()):($("#new-theme input, #new-theme select").prop("disabled",!0),$("#new-theme").hideMe())}),$(".js-shopify-auth-uri").on("blur",b),$(".js-shopify-auth-change").on("keyup paste",b),$("#shopify-theme").on("mousedown",function(){$("#shopify-theme").children().length<4&&a($(".js-shopify-auth-change"))}),$(".js-shopify-use-url").on("click",function(a){var b="";if(b=$("#shopify-url").val()&&""!==$("#shopify-url").val()?$("#shopify-url").val():$("#release_server_bucket_name").val(),""===$.trim(b))return void window.alert("Please enter a valid store URL and try again.");var c=b+".myshopify.com",d=$(".js-shopify-use-url").data("base-href").replace(/https?:\/\/.*?\//,"https://"+c+"/");$(".js-shopify-use-url").attr("href",d)})}};$(document).ready(Integration.init);var ManualDeployment={init:function(){$("#manual-deployment").length&&($(".js-reload-commits").click(function(a){a.preventDefault(),ManualDeployment.updateRevisions($(this),$(this).attr("href"))}),ManualDeployment.loadData())},updateRevisions:function(a,b){a.addClass("loading"),$.get(b)},loadData:function(){if($(".js-review-deployment").length){var a=$(".js-review-deployment"),b=$(".deploy-loading"),c=a.closest("form"),d=a.data("review-deploy-uri");b.showMe(),a.empty(),$.get(d,c.serialize(),function(c){b.hideMe(),a.html(c)})}}};$(document).ready(ManualDeployment.init);var Notifications={init:function(){$('.notifications .action input[type="checkbox"]').each(function(a,b){var c=$(b).parents(".notifications").find("tbody tr:gt(0)");Notifications.watch($(b),c.find("input:eq("+a+")")),0==c.find("input:eq("+a+"):not(:checked)").length&&$(b).prop("checked",!0)}),$('.notifications input[type="checkbox"]').each(function(){var a=$(this).parent().end().addClass("subscription");a.change(function(){Notifications.update(a)}),Notifications.update(a)}),Notifications.activateHTMLMigrationButton()},watch:function(a,b){a.click(function(){return confirm("Are you sure?")?void b.each(function(){$(this).prop("checked",a.prop("checked")),Notifications.update($(this))}):void(a.is(":checked")?a.prop("checked",!1):a.prop("checked",!0))})},update:function(a){a.is(":checked")?a.parent().attr("class","subscription subscribed"):a.parent().attr("class","subscription unsubscribed")},activateHTMLMigrationButton:function(){$("#html-migration-button").click(function(){$("#user_subversion_email_type").val("html")})}};$(document).ready(Notifications.init);var Permissions={init:function(){function a(){$(".permissions-wrapper").height()<$(".permissions").height()&&($(".permissions-box").addClass("permissions-box--fading"),$(".permissions-wrapper").jScrollPane())}var b=$(".permissions tr:not(.action) select");$(".permissions .action select").each(function(a,c){var d=$(c).parents(".permissions"),e=d.find("tr:not(.action)").find("select:eq("+a+")");$(c).on("change.changeAll",function(){0!==$(c).prop("selectedIndex")&&(e.each(function(){$(this).parents(".permission").hasClass("hide")||($(this).prop("selectedIndex",$(c).prop("selectedIndex")-1),Permissions.update($(this)))}),b.trigger("change.deployAccess"),$(c).prop("selectedIndex",0),Permissions.toggleApplyToAll())})}),$(".permissions").find("select").before($(document.createElement("span"))).end().find("label").addClass("permission").each(function(){Permissions.update($(this).find("select"))}),$(document).on("change.update",".permissions label select",function(){Permissions.update($(this))}),$(".permissions tbody tr").each(function(){$(this).find(".permission").each(function(a,b){$(this).addClass("type-"+a)})}),b.on("change.deployAccess",function(){var a=$(this).find("option:selected").text(),b=$(this).parents("td").next("td").find(".permission"),c=b.find("select");-1!==a.search(/no\ access/i)?(b.hideMe(),c.prop("selectedIndex",0),Permissions.update(c)):b.showMe(),Permissions.toggleApplyToAll()}).trigger("change.deployAccess"),$(".permissions-box:visible")&&a(),$('#user-permissions input[type="radio"]').change(function(){var b=$(this).parents("#user-permissions").find('input[type="radio"]:checked').val();"true"===b&&$(".permissions-box").hideMe(),"false"===b&&($(".permissions-box").showMe(),a())}).change(),$('#admin-rights input[type="checkbox"]').change(function(){var a=$(".permissions, .permissions-box, #no-repositories");$(this).is(":checked")?a.hideMe():a.showMe()})},toggleApplyToAll:function(){$(".permissions").each(function(){var a=$(this).find("tr:not(.action) .permission:not(.hide)");$(this).find(".action .permission").each(function(b,c){0===a.filter(".type-"+b).length?$(c).hideMe():$(c).showMe()})})},update:function(a){var b=a.find("option:selected").text(),c=a.parent(),d="apply no-access partial-access full-access";c.removeClass(d).addClass("permission partial-access").find("span").text(b),-1!==b.search(/apply\ to\ all/i)&&c.removeClass(d).addClass("apply"),-1!==b.search(/no\ access/i)&&c.removeClass(d).addClass("no-access"),-1!==b.search(/view activity/i)&&c.removeClass(d).addClass("no-access"),-1!==b.search(/read\ access/i)&&c.removeClass(d).addClass("no-access"),-1!==b.search(/read(.*)only/i)&&c.removeClass(d).addClass("partial-access"),-1!==b.search(/read(.*)write/i)&&c.removeClass(d).addClass("full-access"),-1!==b.search(/full\ access/i)&&c.removeClass(d).addClass("full-access")}};$(document).ready(Permissions.init);var Revisions={init:function(a){var b=this;b.settings=$.extend({url:"",disabled:"",disabledBranch:"",disabledTag:"",destinationKind:"url",onLoad:function(){},onClick:function(){}},a),window.loading=!1},load:function(a,b){if(!window.loading){var c,d=this;c=d.isGlobal()?d.settings.url:a.data("url"),d.set(a,"container",[]),d.set(a,"backup",[]),void 0!=b&&(this.settings.onClick=b),0===d.get(a,"container").length?(window.loading=!0,a.find(".revisions").addClass("loading"),$.getJSON(c,function(b){d.set(a,"container",b),d.set(a,"backup",b),window.loading=!1,Revisions.insert(a)})):Revisions.insert(a),a.find(".search .action-search").off("click").click(function(b){b.preventDefault(),Revisions.search(a,c)}),a.find(".search input").keydown(function(b){13===b.keyCode&&Revisions.search(a,c)}),a.find(".search .action-clear").off("click").click(function(b){b.preventDefault(),d.set(a,"container",d.get(a,"backup")),$(this).hideMe(),Revisions.insert(a),Revisions.reset(a)}),a.find(".action-refresh").off("click").click(function(b){b.preventDefault(),a.find(".revisions").addClass("loading").jScrollPane(),$.getJSON(c,function(b){d.set(a,"container",b),d.set(a,"backup",b),Revisions.insert(a)})})}},insert:function(a){var b=this;if("hidden"!==a.data("status")){if(!b.get(a,"container").length)return void a.find(".revisions").removeClass("loading").find("ul:last").html('<li class="empty">Your search didn’t match any results.</li>');a.find(".revisions").removeClass("loading").find("ul:last").html(Revisions.generateHTML(b.get(a,"container"))).find("a").off("click").click(function(a){return a.preventDefault(),b.settings.onClick($(this)),$(document).click(),!1}),this.settings.onLoad(),b.refresh(a)}},disable:function(a){var b,c=a.data("settings");"revision"===c.kind&&(b=this.settings.disabled),"branch"===c.kind&&(b=this.settings.disabledBranch),"tag"===c.kind&&(b=this.settings.disabledTag),$.each(b.split(";"),function(b,c){a.find('a[rel="'+c+'"]').parent().addClass("selected")})},search:function(a,b){var c=this;a.find(".revisions").addClass("loading").end().find(".action-clear").showMe(),$.get(b,{keywords:a.find(".search input").val()},function(b){c.set(a,"container",b),Revisions.insert(a)},"json")},refresh:function(a){a.find(".revisions").jScrollPane(),this.disable(a)},reset:function(a){window.setTimeout(function(){a.find(".search input").val("")},250)},setDisabled:function(a){this.settings.disabled=a},generateHTML:function(a){var b="";return void 0!=this.settings.prependListWith&&this.settings.prependListWith.length&&(b+=this.settings.prependListWith),$.each(a,function(a,c){c.extra_count?b+='<li class="more">Find '+c.extra_count+" more results in the search field above.</li>":(void 0!==c.revision&&void 0!==c.message&&(b+='<li><a href="'+c[Revisions.settings.destinationKind]+'" rel="'+c.revision+'"><strong>'+Revisions.trimHash(c.revision)+"</strong> "+c.message+"</a></li>"),void 0!==c.name&&(b+='<li><a href="'+c[Revisions.settings.destinationKind]+'" rel="'+c.name+'">'+c.name+"</a></li>"))}),b},trimHash:function(a){return a===parseFloat(a)?a:a.substr(0,8)},set:function(a,b,c){this.isGlobal()?"container"===b?window.revisions=c:window.backup=c:"container"===b?a.data("revisions",c):a.data("backup",c)},get:function(a,b){return this.isGlobal()?"container"===b?window.revisions:window.backup:"container"===b?a.data("revisions"):a.data("backup")},isGlobal:function(){return":href"===this.settings.url?!1:!0}};$(function(){$(".js-reset-commit").click(function(a){a.preventDefault(),$(this).hideMe().parent().find(".select-revision").text("None").addClass("empty").next("input").val("")}),$(".js-set-commit").each(function(){var a=$(this);a.hud({type:"local",size:"large",onShow:function(b){Revisions.load(b,function(b){b.parent().hasClass("selected")||(a.html(b.html()).removeClass("empty").next("a").showMe(),a.nextAll("input").val(b.attr("rel")),$(".revisions ul li.selected").removeClass("selected"),$(".revisions").find('ul li a[rel="'+b.attr("rel")+'"]').parent().addClass("selected"))}),Revisions.setDisabled(a.text())},onHide:function(a){Revisions.reset(a)}})})}),SHOULD_DEBUG=!0;var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},TransferLog={init:function(){$(document).on("click",'[rel="show-transfer-log"]',function(a){a.preventDefault(),Deployments.stop_refreshing(),TransferLog.active=!0,TransferLog.is_preview=!1,TransferLog.load($(this))})},spinner_refresher:function(){$("div.transfer-log ul>li.complete").length==$("div.transfer-log ul>li").length?$("div.transfer-log").removeClass("updating"):setTimeout(TransferLog.spinner_refresher,1e3)},load:function(a){Curtain.show();var b=(a.data("releaseId"),$('<div class="transfer-log loading"></div>').prependTo($("body")).addClass("grow"));$.get(a.attr("href"),function(a){b.html(a).removeClass("loading"),"function"==typeof window.startWebSocket&&startWebSocket(),b.find(".link-close").click(function(a){a.preventDefault(),TransferLog.hide(b)}),TransferLog.start(b),TransferLog.refresh(),TransferLog.spinner_refresher(),setTimeout(TransferLog.spinner_refresher,1e3)},"html"),TransferLog.autoscrolled_to_bottom=!1},hide:function(a){window.startWebSocket=null,$("#deployments-activity").addClass("loading"),Deployments.refreshActivity(),TransferLog.active=!1,a.hide(),Curtain.hide(),TransferLog.clear_element_caches(),$("div.transfer-log").empty().remove(),TransferLog.ws&&TransferLog.ws.close(),Deployments.start_refreshing()},start:function(a){a.find(".tabs a").each(function(b,c){$(c).click(function(c){c.preventDefault(),a.find(".tabs li").removeClass("selected"),a.find(".actions").hide();var d=a.find(".actions:eq("+b+")");d.show(),TransferLog.scrollToBottom(d[0]),$(this).parent().addClass("selected"),TransferLog.refresh()})})},refresh:function(){$(".transfer-log .actions").css("height",$(".transfer-log:first").height()-113)},action_tabs:{},action_divs:{},autoscrolled_to_bottom:!1,process_changes:function(a){var b=a.type,c=a.data.status,d=a.data.release_id;switch(a.data.changes&&TransferLog.update_summary(d,a.data.changes),b){case"deployment_state":switch(c){case"new":TransferLog.set_deploy_status(d,"Please wait...");break;case"calculating-changes":TransferLog.set_deploy_status(d,"Calculating changes...");break;case"done-calculating-changes":TransferLog.set_deploy_status(d,"Done calculating changes...");break;case"deploying":TransferLog.set_deploy_status(d,"Deploying...");break;case"deployed":TransferLog.set_deploy_status(d,"Deployed."),TransferLog.set_deployed(d),_debug("DEPLOYED "+d);break;case"failed":TransferLog.set_deploy_status(d,"FAILED."),TransferLog.set_failed(d),_debug("FAILED "+d);break;case"no-changes":TransferLog.set_deploy_status(d,"Bypassed."),TransferLog.set_bypassed(d);break;case"working-copy":case"initialize-missing-working-copy":case"done-initializing-missing-working-copy":case"saving-changes-list":case"done-saving-changes-list":break;default:_debug("NEW:"),_debug(a)}break;case"deployment_logs":TransferLog.update_file_list(a);break;case"no_changes":TransferLog.set_deploy_status(d,"Bypassed."),TransferLog.set_bypassed(d)}},get_action_div_for_release_id:function(a){var b=null;return Object.prototype.hasOwnProperty.call(TransferLog.action_divs,a)?b=TransferLog.action_divs[a]:(b=$("#action-"+a),TransferLog.action_divs[a]=b),b},get_action_tab_for_release_id:function(a){var b=null;return Object.prototype.hasOwnProperty.call(TransferLog.action_tabs,a)?b=TransferLog.action_tabs[a]:(b=$("#tab-"+a),TransferLog.action_tabs[a]=b),b},clear_element_caches:function(){TransferLog.action_tabs={},TransferLog.action_divs={}},set_deploy_status:function(a,b){var c=TransferLog.get_action_div_for_release_id(a);c.find("span.status em").text(b).parent().show()},humanize:function(a){return a=a.replace("_"," "),a.charAt(0).toUpperCase()+a.slice(1)},update_summary:function(a,b){var c=TransferLog.get_action_div_for_release_id(a);buf='<span class="sep">&bull;</span> Total: '+b.total+"</span>";for(name in b)"total"!=name&&b[name]>0&&(buf=buf+'<span class="sep">&bull;</span> '+TransferLog.humanize(name)+": "+b[name]);c.find("p span.loaded").html(buf)},set_deployed:function(a){var b=TransferLog.get_action_div_for_release_id(a);b.children("p.status-success").show(),this.autoscroll(b);var c=TransferLog.get_action_tab_for_release_id(a);c.addClass("complete"),c.find("span").remove()},scrollToBottom:function(a){a.scrollTop=a.scrollHeight},autoscroll:function(a){var b=a.scrollHeight-a.scrollTop;b<$(".transfer-log:first").height()&&this.scrollToBottom(a)},set_failed:function(a){var b=TransferLog.get_action_div_for_release_id(a);b.children("p.status-failed").show(),this.autoscroll(b[0]);var c=TransferLog.get_action_tab_for_release_id(a);c.addClass("complete"),c.addClass("failed"),c.find("span").remove()},set_bypassed:function(a){var b=TransferLog.get_action_div_for_release_id(a);b.children("p.status-bypassed").show(),this.autoscroll(b[0]);var c=TransferLog.get_action_tab_for_release_id(a);c.addClass("complete"),c.addClass("bypassed"),c.find("span").remove()},update_file_list:function(a){var b=function(a){var b="";"error"==a.state?b="progress-error":"execute"==a.action&&(b="tl-terminal");var c='<li class="'+b+'" data-percent="'+a.percentage+' "><span class="action">'+escapeHtml(a.action)+"</span> ";return"execute"==a.action&&"error"!=a.state?c=c+'<pre class="terminal">'+escapeHtml(a.path)+"</pre>":c+=escapeHtml(a.path),c+"</li>"},c=a.data.release_id,d=a.data.logs,e=TransferLog.get_action_div_for_release_id(c),f=e.find("ol"),g=TransferLog.get_action_tab_for_release_id(c),h=f.length>0;for(var i in d)f.append(b(d[i]));"undefined"!=typeof hljs&&$("pre.terminal").each(function(a,b){hljs.highlightBlock(b)});var j=f.children().last().data("percent");j&&g.find("span").text(j+"%"),"100"==j?g.addClass("complete"):TransferLog.is_preview&&TransferLog.set_deployed(c),!TransferLog.autoscrolled_to_bottom&&h?(TransferLog.autoscrolled_to_bottom=!0,this.scrollToBottom(e[0])):this.autoscroll(e[0])}};$(document).ready(TransferLog.init),$(window).resize(TransferLog.refresh),$(function(){$("#users-filter select").change(function(){var a=$(this).val(),b=$("#users-list a, #users-list div");if("all"==a)$(b).removeClass("fade");else switch(a){case"users":$(b).removeClass("fade"),$("#users-list .role").parent().addClass("fade");break;case"admins":$(b).addClass("fade"),$("#users-list").find('.role[class~="user-type-admin"], .role[class~="user-type-owner"]').parent().removeClass("fade");break;case"invited":$(b).addClass("fade"),$('#users-list .role[class~="user-type-invited"]').parent().removeClass("fade")}})});var Security={init:function(){$(".js-restrict-ip").on("submit",function(a){a.preventDefault(),Security.createIP($(this))}).on("reset",function(){window.setTimeout(Security.toggleRangeSelector,200)}).on("change",".js-change-ip-type",function(){Security.toggleRangeSelector()}),$(".js-ip-restrictions").on("click",".a-delete",function(a){a.preventDefault();var b=$(this).attr("rel");window.confirm(b)&&Security.deleteIP($(this))})},createIP:function(a){var b=a.parent().find("table"),c=a.find(".form-submit");Forms.hideValidationErrors(a),
c.addClass("loading"),$.post(a.attr("action"),a.serialize(),"html").done(function(c){b.showMe().append(c),Forms.resetForm(a)}).fail(function(b){a.find("fieldset").prepend(b.responseText)}).always(function(){c.removeClass("loading")})},toggleRangeSelector:function(){"address"===$(".js-change-ip-type").val()?$("#restrictions-ip-range").hideMe():$("#restrictions-ip-range").showMe()},deleteIP:function(a){var b=a.closest("table");a.addClass("loading"),$.post(a.attr("href"),{_method:"DELETE",authenticity_token:$('[name="authenticity_token"]').val(),success:function(){a.closest("tr").fadeOut(500,function(){0===b.find("tbody > tr:visible").length&&b.hideMe()})},complete:function(){a.removeClass("loading")}})}};$(document).ready(Security.init);var Upgrade={init:function(){Upgrade.showPlanFromURI(),Upgrade.toggleCreditCardForm($(".js-plan:visible")),$(".plan-item-wrap").click(function(a){a.preventDefault(),Upgrade.switchPlans($(this))}),"onhashchange"in window&&(window.onhashchange=function(){Upgrade.showPlanFromURI()})},switchPlans:function(a){var b,c=$(a.prop("hash")),d=a.find(".plan-item-title").text(),e=a.find(".plan-item-price b").text(),f=$('.js-enter-credit-card input[type="submit"]');c.is(":visible")||($(".js-plan").hideMe(),c.showMe(),$.smoothScroll(),$(".plan-showcase").addClass("bloom").on("webkitTransitionEnd oTransitionEnd transitionend",function(){$(this).removeClass("bloom")}),"Free"==e?$(".upgrade-form-summary").hideMe():($(".js-current-plan-price").text(e),$(".upgrade-form-summary").showMe()),$(".js-current-plan-name").text(d),$(".js-enter-credit-card").attr("action","/plans/"+d+"/choose"),f.length&&(b=f.val(),f.val(b.replace(/to [\w\s]+$/g,"to "+d))),Upgrade.toggleCreditCardForm(c),$(".plan-item--current").removeClass("plan-item--current"),$(a).parents(".plan-item").addClass("plan-item--current"))},toggleCreditCardForm:function(a){$(a).find(".upgrade-form").length?$(".js-enter-credit-card").hideMe():$(".js-enter-credit-card").showMe()},showPlanFromURI:function(){var a=window.location.hash,b=$('a[href="'+a+'"]');a.length&&$(b).length&&Upgrade.switchPlans($(b))}};$(document).ready(Upgrade.init);var AssignUsers={init:function(){$(".js-assign-users").length&&(2==$(".assign-users select").length||$(".user-token").length?window.userQueryType="select":window.userQueryType="input",AssignUsers.prepareData(),AssignUsers.setupActions(),AssignUsers.disable(),AssignUsers.refresh(),"select"!=window.userQueryType&&$(".assign-users input").autocomplete({type:"local",data:users,blankMessage:"Nothing found or already assigned.",offset:0,onTyping:function(){AssignUsers.disable()},onShow:function(){AssignUsers.cleanupAutocomplete()},onClear:function(){AssignUsers.reset()},onSelect:function(a){$('.assign-users input[type="text"]').val(a.text).data("id",a.id),AssignUsers.toggleButton()}}))},prepareData:function(){$('.assign-users input[type="text"]').data("id",!1),$(".assign-users .user-bs select option").each(function(){if(""!=$(this).val()){var a=$(this).text().split("|");$(this).data({avatar:a[0],status:a[1]}).text(a[2])}})},setupActions:function(){$(".assign-users select").change(function(){AssignUsers.toggleButton()}),$(".assign-users button").click(function(a){return a.preventDefault(),AssignUsers.check()?(AssignUsers.assign(),AssignUsers.reset(),void AssignUsers.refresh()):void alert("One or more users are already assigned.")}),$(".assign-users").on("click",".a-delete",function(a){a.preventDefault(),$(this).parents("tr").remove(),AssignUsers.refresh()}),$(".assign-users").parents("form").submit(function(a){$(".assign-users tfoot").find(":input").removeAttr("name")})},assign:function(){var a=$(".assign-users tr.hide:last").clone(),b=$(".assign-users .user-bs select");switch(a.find("th").html(unescape(b.find("option:selected").data("avatar"))+" "+b.find("option:selected").text()+" "+unescape(b.find("option:selected").data("status"))+' <input type="hidden" name="'+b.attr("name")+'[]" value="'+b.find("option:selected").val()+'" />'),window.userQueryType){case"select":var c=$(".assign-users .user-assigned select");a.find("td:first").html(c.find("option:selected").text()+' <input type="hidden" name="'+c.attr("name")+'[]" value="'+c.find("option:selected").val()+'" />');break;case"input":var c=$('.assign-users input[type="text"]');a.find("td:first").html(c.val()+' <input type="hidden" name="'+c.attr("name")+'[]" value="'+c.data("id")+'" />')}a.insertBefore($(".assign-users tr.hide:last")).showMe()},check:function(){var a=!0;if(-1!=jQuery.inArray($(".assign-users .user-bs select").val(),AssignUsers.users("beanstalk"))&&(a=!1),1==AssignUsers.allowMultiple())return a;switch(window.userQueryType){case"select":var b=$(".assign-users .user-assigned select");-1!=jQuery.inArray(b.val(),AssignUsers.users("service"))&&(a=!1);break;case"input":var b=$('.assign-users input[type="text"]');-1!=jQuery.inArray(b.data("id"),AssignUsers.users("service"))&&(a=!1)}return a},users:function(a){var b=new Array;switch(a){case"beanstalk":$(".assign-users .user-bs input:hidden").each(function(){b.push($(this).val())});break;case"service":$(".assign-users .user-assigned input:hidden").each(function(){b.push($(this).val())})}return b},toggleButton:function(){var a=!1;switch(window.userQueryType){case"select":0!=$(".assign-users .user-assigned select")[0].selectedIndex&&(a=!0);break;case"input":0!=$('.assign-users input[type="text"]').data("id")&&(a=!0)}0==$(".assign-users .user-bs select")[0].selectedIndex||0==a?AssignUsers.disable():AssignUsers.enable()},cleanupAutocomplete:function(){var a=new Array;$(".assign-users tbody td input:hidden").each(function(){a.push($(this).val())}),$(".autocomplete a").each(function(){-1!=jQuery.inArray($(this).attr("rel"),a)&&$(this).parent().remove()}),0==$(".autocomplete a").length&&$(".autocomplete p").showMe()},enable:function(){$(".assign-users button").prop("disabled",!1)},disable:function(){$(".assign-users button").prop("disabled",!0)},refresh:function(){$(".assign-users select option").prop("disabled",!1),2==$(".assign-users tbody tr").length?$(".assign-users .empty").showMe():$(".assign-users .empty").hideMe(),$(".assign-users tr th input:hidden").each(function(){$('.assign-users .user-bs select option[value="'+$(this).val()+'"]').prop("disabled",!0)}),"input"!=window.userQueryType&&1!=AssignUsers.allowMultiple()&&$(".assign-users tr td input:hidden").each(function(){$('.assign-users .user-assigned select option[value="'+$(this).val()+'"]').prop("disabled",!0)})},reset:function(){$(".assign-users select").each(function(){$(this)[0].selectedIndex=0}),$('.assign-users input[type="text"]').val("").data("id",!1),AssignUsers.disable()},allowMultiple:function(){return 1==$(".assign-users.allow-multiple").length?!0:!1}};$(document).ready(AssignUsers.init);var ConnectRepository={init:function(){ConnectRepository.changeService(),$(".js-change-repo-type").change(function(){ConnectRepository.changeRepoType($(this).val())}),$(".js-change-auth-method").change(function(){ConnectRepository.changeAuthMethod($(this).val())}),$(".connected-account select").change(function(){ConnectRepository.prefillTitle($(this).val())})},changeService:function(){function a(a){$(".service-item.selected").removeClass("selected"),a.parents(".service-item").addClass("selected"),$(".repo-connect-service").hideMe(),$("#service-"+a.val()).showMe(),$("#extra-settings").showMe(),ConnectRepository.prefillTitle($("#service-"+a.val()).find(".connected-account.selected").find("select").val())}function b(a){a.parents(".repo-connect-service").find(".connected-account").removeClass("selected"),a.parents(".connected-account").addClass("selected"),ConnectRepository.prefillTitle(a.parents(".connected-account.selected").find("select").val())}$(".repo-connect").length&&($(".js-service-radio").change(function(){a($(this))}),a($(".js-service-radio:checked")),$(".js-connected-account").change(function(){b($(this))}),b($(".js-connected-account:checked")))},prefillTitle:function(a){a&&$("#repo-title").val($('.connected-account.selected option[value="'+a+'"]').text().trim())},changeRepoType:function(a){$(".js-change-repo-type:checked").length?$("#auth-settings").showMe():$("#auth-settings").hideMe(),$("#auth-methods, #auth-password, #auth-pubkey").hideMe(),"subversion"===a&&$("#auth-password").showMe(),"git"===a&&$("#auth-methods").showMe(),$(".js-change-auth-method:checked").prop("checked",!1)},changeAuthMethod:function(a){$(".js-auth-method").hideMe(),$("#auth-"+a).showMe()}};$(document).ready(ConnectRepository.init),$(function(){function a(){$('div[id^="reason-"]').hideMe().find(":input").prop("disabled",!0),$("#reason-"+$("#cancel-reasons select").val()).showMe().find(":input").prop("disabled",!1)}$("#cancel-reasons select").change(function(){$(".form-row").find('textarea, input[type="text"]').val(""),a()}),a()});var ConfigFiles={init:function(){ConfigFiles.add()},add:function(){var a=$(".js-add-config-file"),b=$(".js-static-file-select");b.change(function(a){a.preventDefault();var b=$(a.target),c=b.closest(".form-field").find('input[type="text"]');""===b.val()?(c.val(""),c.prop("readonly",!0)):c.prop("readonly",!1)}),$(".js-static-file-delete").click(function(a){a.preventDefault();var b=$(a.target),c=b.closest(".js-static-file");$(".js-static-file").length>1?c.remove():c.find("select option:first").prop("selected",!0).end().find('input[type="text"]').prop("readonly",!0).val("")}),a.click(function(a){a.preventDefault();var b=$(".js-static-file").last(),c=b.clone(!0);c.removeAttr("id").find("select option:first").prop("selected",!0).end().find('input[type="text"]').prop("readonly",!0).val("").end().insertAfter(b)})}};$(document).ready(ConfigFiles.init);var Tokens={init:function(){$(".js-generate-token").on("submit",function(a){a.preventDefault(),Tokens.generate($(this))}),$(document).on("click",".js-delete-token",function(a){a.preventDefault(),Tokens.remove($(this))})},generate:function(a){var b=a.find(".form-submit");Forms.hideValidationErrors(a),b.addClass("loading"),$.post(a.attr("action"),a.serialize(),"html").done(function(b){a.after(b),a.siblings(".blank").hideMe(),Forms.resetForm(a)}).fail(function(b){a.find("fieldset").prepend(b.responseText)}).always(function(){b.removeClass("loading")})},remove:function(a){if(window.confirm("Are you sure you want to delete this API token?")){var b=a.closest(".api-token");a.addClass("loading"),$.ajax(a.attr("href"),{type:"DELETE"}).done(function(){b.fadeOut(400,function(){$(".api-token:visible").length||b.siblings(".blank").showMe()})}).always(function(){a.removeClass("loading")})}}};$(document).ready(Tokens.init);var FoldableSets={init:function(){var a=150;$(document).on("click.unfold",".js-unfold-set",function(b){b.preventDefault();var c=$($(this).attr("href")),d=$(this);d.hideMe(),c.slideDown(a,function(){$(this).removeClass("is-hidden")})}).on("click.fold",".js-fold-set",function(b){b.preventDefault();var c=$(this).closest(".set-fold"),d=$(".set-unfold").filter('[href="#'+c.attr("id")+'"]');c.slideUp(a,function(){$(this).addClass("is-hidden"),d.showMe()})}).on("change keyup",".js-watch-changes :input",function(){var a=$(this).closest(".set-fold"),b=$(".set-unfold").filter('[href="#'+a.attr("id")+'"]');FoldableSets.isSetChanged(a)?(a.addClass("is-changed"),b.addClass("is-changed")):(a.removeClass("is-changed"),b.removeClass("is-changed"))}),$(".set-fold").filter(":hidden").each(function(a,b){function c(){FoldableSets.isSetChanged(d)&&(e.trigger("click.unfold").addClass("is-changed"),d.addClass("is-changed"))}var d=$(b),e=$(".js-unfold-set").filter('[href="#'+d.attr("id")+'"]');d.find(".ace-editor").length?d.find(".ace-editor input").on("editor:saved",c):c()})},focusOnFirst:function(a){var b=a.find(":input:first");b.closest(".ace-editor").length?ace.edit(b.closest(".ace-editor").children("pre")[0]).focus():b.focus()},isSetChanged:function(a){function b(a,b){void 0===a?""!==b.val()&&(d=!0):b.val()!==a&&(d=!0)}var c=a.find(":input"),d=!1;return c.each(function(a,c){var e=$(c),f=e.data("default");void 0!==f&&(f=f.toString()),e.is(":checkbox")||e.is(":radio")?"checked"!==f?e.is(":checked")&&(d=!0):e.is(":checked")||(d=!0):e.find("option").length?(void 0===f&&0===e.find("option[selected]").length&&(e.data("default",e.find("option:first").val()),f=e.data("default")),b(f,e)):"hidden"===e.attr("type")?e.closest(".ace-editor").length&&b(f,e):e.hasClass("ace_text-input")||b(f,e)}),d}};$(document).ready(FoldableSets.init);var ServersStatus={init:function(){$(".servers-list").on("click",".js-check-connection",ServersStatus.checkConnection)},checkConnection:function(a){a.preventDefault();var b=$(this),c=$(this).closest(".server");ServersStatus.resetServer(c,"updating"),$.post(b.attr("href"))},updated:function(a){var b=$('.server[data-server-id="'+a.server_id+'"]');b.length&&(ServersStatus.resetServer(b,a.status),"success"===a.status?b.addClass("server--connected"):"failure"===a.status?b.addClass("server--failed"):"updating"===a.status)},resetServer:function(a,b){a.removeClass("server--connected server--failed").find("[data-server-status]").hideMe().end().find('[data-server-status="'+b+'"]').showMe()}};$(document).ready(ServersStatus.init);var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))})(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();WEB_SOCKET_SWF_LOCATION="/javascripts/websockets/WebSocketMain.swf",WEB_SOCKET_DEBUG=!0,function(){if(window.WEB_SOCKET_FORCE_FLASH);else{if(window.WebSocket)return;if(window.MozWebSocket)return void(window.WebSocket=MozWebSocket)}var a;return a=window.WEB_SOCKET_LOGGER?WEB_SOCKET_LOGGER:window.console&&window.console.log&&window.console.error?window.console:{log:function(){},error:function(){}},swfobject.getFlashPlayerVersion().major<10?void a.error("Flash Player >= 10.0.0 is required."):("file:"==location.protocol&&a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),window.WebSocket=function(a,b,c,d,e){var f=this;f.__id=WebSocket.__nextId++,WebSocket.__instances[f.__id]=f,f.readyState=WebSocket.CONNECTING,f.bufferedAmount=0,f.__events={},b?"string"==typeof b&&(b=[b]):b=[],f.__createTask=setTimeout(function(){WebSocket.__addTask(function(){f.__createTask=null,WebSocket.__flash.create(f.__id,a,b,c||null,d||0,e||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var b=WebSocket.__flash.send(this.__id,encodeURIComponent(a));return 0>b?!0:(this.bufferedAmount+=b,!1)},WebSocket.prototype.close=function(){return this.__createTask?(clearTimeout(this.__createTask),this.__createTask=null,void(this.readyState=WebSocket.CLOSED)):void(this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)))},WebSocket.prototype.addEventListener=function(a,b,c){a in this.__events||(this.__events[a]=[]),this.__events[a].push(b)},WebSocket.prototype.removeEventListener=function(a,b,c){if(a in this.__events)for(var d=this.__events[a],e=d.length-1;e>=0;--e)if(d[e]===b){d.splice(e,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],c=0;c<b.length;++c)b[c](a);var d=this["on"+a.type];d&&d.apply(this,[a])},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState),"protocol"in a&&(this.protocol=a.protocol);var b;if("open"==a.type||"error"==a.type)b=this.__createSimpleEvent(a.type);else if("close"==a.type)b=this.__createSimpleEvent("close"),b.wasClean=a.wasClean?!0:!1,b.code=a.code,b.reason=a.reason;else{if("message"!=a.type)throw"unknown event type: "+a.type;var c=decodeURIComponent(a.message);b=this.__createMessageEvent("message",c)}this.dispatchEvent(b)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var b=document.createEvent("Event");return b.initEvent(a,!1,!1),b}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,b){if(document.createEvent&&window.MessageEvent&&!window.opera){var c=document.createEvent("MessageEvent");return c.initMessageEvent("message",!1,!1,b,null,null,window,null),c}return{type:a,data:b,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__initialized=!1,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__initialized){if(WebSocket.__initialized=!0,WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");if(!window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&!WEB_SOCKET_SWF_LOCATION.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/)&&WEB_SOCKET_SWF_LOCATION.match(/^\w+:\/\/([^\/]+)/)){var b=RegExp.$1;location.host!=b&&a.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('"+location.host+"' != '"+b+"'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")}var c=document.createElement("div");c.id="webSocketContainer",c.style.position="absolute",WebSocket.__isFlashLite()?(c.style.left="0px",c.style.top="0px"):(c.style.left="-100px",c.style.top="-100px");var d=document.createElement("div");d.id="webSocketFlash",c.appendChild(d),document.body.appendChild(c),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||a.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),c=0;c<b.length;++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])}catch(d){a.error(d)}},0),!0},WebSocket.__log=function(b){a.log(decodeURIComponent(b))},WebSocket.__error=function(b){a.error(decodeURIComponent(b))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename&&a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},void(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||swfobject.addDomLoadEvent(function(){WebSocket.__initialize()})))}();